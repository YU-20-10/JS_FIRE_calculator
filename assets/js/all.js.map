{"version":3,"sources":["all.js"],"names":["tooltipTriggerList","document","querySelectorAll","tooltipList","map","tooltipTriggerEl","bootstrap","Tooltip","navDropdowmMenu","querySelector","navUserImg","register","registerForm","registerReturnMessage","login","loginForm","loginReturnMessage","formList","clacBtn","fINum","allInputReturnMessage","userPage","userpageImg","userpageName","userpageMail","backstageUserImg","allUserData","allPostData","backstageUserId","backstageUserSearchOuter","backstageUserSearchKeyword","backstagePostsAddbtn","backstagePostSearchOuter","backstagePostSearchKeyword","userpageFINum","userpageClacBtnTop","userpageClacBtnDown","userpageSum","userpageAnnualExpensesDom","userpageOneTimeExpensesDom","userpageTargetWithdrawalRate","userpageExpectedInvestmentAnnualReturn","userpageFormAnnualExpenses","userpageFINumAnnualExpensesReturnMessage","userpageFormOneTimeExpenses","userpageFINumOneTimeExpensesReturnMessage","userpageFINumOneTimeExpensesValue","userpageFINumRenderAll","userpageBtnWrap","freeNum","howFarToFree","checkLoginstatus","checkUserIsAdmin","checkUserImg","checkUserName","checkUserEmail","haveUserFIData","userFIDataArr","userpageChangeTarget","loginConstraints","email","presence","message","password","length","minimum","maximum","format","pattern","registerConstraints","name","passwordCheck","equality","attribute","clacConstraints","annualExpenses","numericality","notValid","greaterThanOrEqualTo","notGreaterThanOrEqualTo","oneTimeExpenses1","oneTimeExpensesTime1","oneTimeExpenses2","oneTimeExpensesTime2","oneTimeExpenses3","oneTimeExpensesTime3","annualInvestment","currentInvestment","targetWithdrawalRate","expectedInvestmentAnnualReturn","userpageAnnualExpensesConstraints","living","food","entertainment","tax","transportation","medical","learning","userpageOneTimeExpensesConstraints","oneTimeExpensesTime4","oneTimeExpenses4","userEditedDataConstraints","allowEmpty","userImg","url","getFormData","dom","formData","FormData","formDataObj","reduce","acc","values","trim","userInputCheck","constraints","datasetName","dataCheckBool","dataCheck","validate","Object","entries","forEach","key","value","str","crr","textContent","sortoutData","dataObj","result","parseInt","removeReturnMessage","listDom","i","getClacDataObj","obj","makeDataNoEmpty","clacFINum","financialIndependenceNumber","Math","pow","untilFI","num","untilFinancialIndependence","log","renderClacChart","FINum","crrInv","FIDays","chart","c3","generate","bindto","d3","select","data","columns","order","type","colors","財富自由達成率","距離財富自由目標還有","donut","title","label","show","width","legend","hide","round","isFinite","style","attr","insert","text","userRegister","axios","post","then","res","alert","setTimeout","location","href","err","console","error","userLogin","localStorage","setItem","accessToken","user","id","loginCheck","callbackFn","userId","getItem","userheaders","headers","Authorization","get","status","response","removeItem","renderUserNav","isAdmin","userName","innerHTML","renderNavUserImg","background","classList","add","getUserpageFIData","oneTimeExpenses","fIDays","dataset","userpageFinumRender","Number","renderUserClacChart","postUserpageFIData","patchUserpageFIData","patch","selectAll","renderUserpageUserData","userMail","userLogout","renderBackstageUser","renderBackstageUserData","returnData","getAllUserData","patchUserData","selectedUserId","window","reload","searchUserData","keyword","resData","searchData","renderBackstagePostData","content","getAllPostData","postPostData","patchPostData","selectPostId","deletePostData","searchPostData","addEventListener","e","formDataRow","check","financialIndependenceDays","rowData","clac","sum","target","onetimeexpenses","oneTimeExpensesTime","investmentAnnualReturn","currentValueDom","clacData","preventDefault","saveBtn","userpageSavebtn","editBtn","userpageEditbtn","saveDom","selector","updateData","editDom","fIDatavalue","selectedUserSave","backstageUserSave","editedDataDom","returnMessageDom","editedData","bool","backstageUserSearch","selectedPostSave","backstagePostSave","selectedPostDelete","backstagePostDelete","deleteDataDom","backstagePostSearch","onload","pathname","logoutBtn","userData","postData"],"mappings":"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","file":"all.js","sourcesContent":["//bs5 init\nconst tooltipTriggerList = document.querySelectorAll('[data-bs-toggle=\"tooltip\"]');\nconst tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));\n\n\n//--------DOM元素綁定 start--------\nconst navDropdowmMenu = document.querySelector(\"[data-nav-dropdowm-menu]\");\nconst navUserImg = document.querySelector(\"[data-nav-user-img]\");\n\nconst register = document.querySelector(\"[data-register]\");\nconst registerForm = document.querySelector(\"[data-register-form]\");\nconst registerReturnMessage = document.querySelectorAll(\"[data-register-return-message]\");\n\nconst login = document.querySelector(\"[data-login]\");\nconst loginForm = document.querySelector(\"[data-login-form]\");\nconst loginReturnMessage = document.querySelectorAll(\"[data-login-return-message]\");\n\nconst formList = document.querySelector(\"[data-form-list]\");\nconst clacBtn = document.querySelector(\"[data-btn-clac]\");\nconst fINum = document.querySelector(\"[data-FINum]\");\nconst allInputReturnMessage = document.querySelectorAll(\"[data-input-return-message]\");\n\nconst userPage = document.querySelector(\"[data-user-page]\");\nconst userpageImg = document.querySelector(\"[data-userpage-user-img]\");\nconst userpageName = document.querySelector(\"[data-userpage-user-name]\");\nconst userpageMail = document.querySelector(\"[data-userpage-user-mail]\");\n\nconst backstageUserImg = document.querySelector(\"[data-backstage-userImg]\");\nconst allUserData = document.querySelector(\"[data-backstage-users]\");\nconst allPostData = document.querySelector(\"[data-backstage-posts]\");\nconst backstageUserId = document.querySelectorAll(\"[data-backstage-user-id]\");\nconst backstageUserSearchOuter = document.querySelector(`[data-backstage-user-search=\"outer\"]`);\nconst backstageUserSearchKeyword = document.querySelector(`[data-backstage-user-search=\"keyword\"]`);\nconst backstagePostsAddbtn = document.querySelector(`[data-backstage-posts-addbtn]`);\nconst backstagePostSearchOuter = document.querySelector(`[data-backstage-post-search=\"outer\"]`);\nconst backstagePostSearchKeyword = document.querySelector(`[data-backstage-post-search=\"keyword\"]`);\n\n\nconst userpageFINum = document.querySelector(\"[data-userpage-FINum]\");\nconst userpageClacBtnTop = document.querySelector(\"[data-userpage-clac-btn-top]\");\nconst userpageClacBtnDown = document.querySelector(\"[data-userpage-clac-btn-down]\");\nconst userpageSum = document.querySelectorAll(\"[data-userpage-sum]\");\nconst userpageAnnualExpensesDom = document.querySelector(`[data-userpage-sum=\"annualExpenses\"]`);\nconst userpageOneTimeExpensesDom = document.querySelector(`[data-userpage-sum=\"oneTimeExpenses\"]`);\nconst userpageTargetWithdrawalRate = document.querySelector(`[data-userpage-sum=\"targetWithdrawalRate\"]`);\nconst userpageExpectedInvestmentAnnualReturn = document.querySelector(`[data-userpage-sum=\"expectedInvestmentAnnualReturn\"]`);\nconst userpageFormAnnualExpenses = document.querySelector(`[data-userpage-form=\"annualExpenses\"]`);\nconst userpageFINumAnnualExpensesReturnMessage = document.querySelectorAll(\"[data-userpage-FINum-annualExpenses-return-message]\");\nconst userpageFormOneTimeExpenses = document.querySelector(`[data-userpage-form=\"oneTimeExpenses\"]`);\nconst userpageFINumOneTimeExpensesReturnMessage = document.querySelectorAll(\"[data-userpage-FINum-oneTimeExpenses-return-message]\");\nconst userpageFINumOneTimeExpensesValue = document.querySelectorAll(\"[data-userpage-FINum-oneTimeExpenses]\");\nconst userpageFINumRenderAll = document.querySelectorAll(\"[data-userpage-FINum-render]\");\nconst userpageBtnWrap = document.querySelector(\"[data-userpage-btn-wrap]\");\n\n\n\n//--------DOM元素綁定 end--------\n\n\n\n\n\n\n//--------參數宣告 start--------\nlet freeNum = 0;\nlet howFarToFree = 0;\nlet checkLoginstatus = \"\"; //存放登入後狀態\nlet checkUserIsAdmin = \"\"; //存放登入後使用者是否為管理者\nlet checkUserImg = \"\"; //存放登入後使用者頭像\nlet checkUserName = \"\"; //存放登入後使用者名稱\nlet checkUserEmail = \"\"; //存放登入後使用者email\nlet haveUserFIData = \"\"; //存放有無使用者fidata的布林值\nlet userFIDataArr = []; //計算出結果時，將結果存放在全域並post全域並post data到json-server\nlet userpageChangeTarget = \"\";\n// let selectedUserId = 0; //存放後台被選取的user的id\n\n\n\nconst loginConstraints = {\n  email: {\n    presence: {\n      message: \"^請輸入email\"\n    },\n    email: {\n      message: \"^請正確填寫email格式\"\n    }\n  },\n  password: {\n    presence: {\n      message: \"^請輸入密碼\",\n    },\n    length: {\n      minimum: 5,\n      maximum: 12,\n      message: \"^密碼為5~12位英文或數字\"\n    },\n    format: {\n      pattern: \"[a-z0-9]+\",\n      message: \"^密碼為5~12位英文或數字\"\n    }\n  }\n};\nconst registerConstraints = {\n  name: {\n    presence: {\n      message: \"^請輸入使用者暱稱\"\n    },\n    length: {\n      minimum: 1,\n      maximum: 10,\n      message: \"^暱稱為1~10個中英數字\"\n    },\n  },\n  email: {\n    presence: {\n      message: \"^請輸入email\"\n    },\n    email: {\n      message: \"^請正確填寫email格式\"\n    }\n  },\n  password: {\n    presence: {\n      message: \"^請輸入密碼\",\n    },\n    length: {\n      minimum: 5,\n      maximum: 12,\n      message: \"^密碼需為5~12位英文或數字\"\n    },\n    format: {\n      pattern: \"[a-z0-9]+\",\n      message: \"^密碼需為5~12位英文或數字\"\n    }\n  },\n  passwordCheck: {\n    presence: {\n      message: \"^請再次輸入密碼\",\n    },\n    equality: {\n      attribute: \"password\",\n      message: \"^輸入值與密碼不符，請重新輸入\",\n    }\n  }\n};\n\nconst clacConstraints = {\n  annualExpenses: {\n    presence: {\n      message: \"^「預估退休時年支出」如果沒有填寫將無法計算\"\n    },\n    numericality: {\n      notValid: \"^「預估退休時年支出」僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^「預估退休時年支出」需要大於等於零\"\n    }\n  },\n  oneTimeExpenses1: {\n    numericality: {\n      notValid: \"^「預估一次性大筆支出」僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^「預估一次性大筆支出」需要大於等於零\"\n    }\n  },\n  oneTimeExpensesTime1: {\n    numericality: {\n      notValid: \"^「預估年數」僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^「預估年數」需要大於等於零\"\n    }\n  },\n  oneTimeExpenses2: {\n    numericality: {\n      notValid: \"^「預估一次性大筆支出」僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^「預估一次性大筆支出」需要大於等於零\"\n    }\n  },\n  oneTimeExpensesTime2: {\n    numericality: {\n      notValid: \"^「預估年數」僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^「預估年數」需要大於等於零\"\n    }\n  },\n  oneTimeExpenses3: {\n    numericality: {\n      notValid: \"^「預估一次性大筆支出」僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^「預估一次性大筆支出」需要大於等於零\"\n    }\n  },\n  oneTimeExpensesTime3: {\n    numericality: {\n      notValid: \"^「預估年數」僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^「預估年數」需要大於等於零\"\n    }\n  },\n  annualInvestment: {\n    numericality: {\n      notValid: \"^「預估每年可投資金額」僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^「預估每年可投資金額」需要大於等於零\"\n    }\n  },\n  currentInvestment: {\n    numericality: {\n      notValid: \"^「目前已進行投資金額」僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^「目前已進行投資金額」需要大於等於零\"\n    }\n  },\n  targetWithdrawalRate: {\n    presence: {\n      message: \"^「預估每年提領率」如果沒有填寫將無法計算\"\n    },\n    numericality: {\n      notValid: \"^「預估每年提領率」僅能輸入數字\",\n      greaterThanOrEqualTo: 1,\n      notGreaterThanOrEqualTo: \"^「預估每年提領率」需要大於等於1%\"\n    }\n  },\n  expectedInvestmentAnnualReturn: {\n    presence: {\n      message: \"^「預估平均每年投資報酬率」如果沒有填寫將無法計算\"\n    },\n    numericality: {\n      notValid: \"^「預估平均每年投資報酬率」僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^「預估平均每年投資報酬率」需要大於等於0%\"\n    }\n  }\n}\n\nconst userpageAnnualExpensesConstraints = {\n  living: {\n    numericality: {\n      notValid: \"^此欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^此欄位的輸入數值需要大於等於零\"\n    }\n  },\n  food: {\n    numericality: {\n      notValid: \"^此欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^此欄位的輸入數值需要大於等於零\"\n    }\n  },\n  entertainment: {\n    numericality: {\n      notValid: \"^此欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^此欄位的輸入數值需要大於等於零\"\n    }\n  },\n  tax: {\n    numericality: {\n      notValid: \"^此欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^此欄位的輸入數值需要大於等於零\"\n    }\n  },\n  transportation: {\n    numericality: {\n      notValid: \"^此欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^此欄位的輸入數值需要大於等於零\"\n    }\n  },\n  medical: {\n    numericality: {\n      notValid: \"^此欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^此欄位的輸入數值需要大於等於零\"\n    }\n  },\n  learning: {\n    numericality: {\n      notValid: \"^此欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^此欄位的輸入數值需要大於等於零\"\n    }\n  }\n}\n\nconst userpageOneTimeExpensesConstraints = {\n  oneTimeExpensesTime1: {\n    numericality: {\n      notValid: \"^此欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^此欄位的輸入數值需要大於等於零\"\n    }\n  },\n  oneTimeExpenses1: {\n    numericality: {\n      notValid: \"^此欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^此欄位的輸入數值需要大於等於零\"\n    }\n  },\n  oneTimeExpensesTime2: {\n    numericality: {\n      notValid: \"^此欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^此欄位的輸入數值需要大於等於零\"\n    }\n  },\n  oneTimeExpenses2: {\n    numericality: {\n      notValid: \"^此欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^此欄位的輸入數值需要大於等於零\"\n    }\n  },\n  oneTimeExpensesTime3: {\n    numericality: {\n      notValid: \"^此欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^此欄位的輸入數值需要大於等於零\"\n    }\n  },\n  oneTimeExpenses3: {\n    numericality: {\n      notValid: \"^此欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^此欄位的輸入數值需要大於等於零\"\n    }\n  },\n  oneTimeExpensesTime4: {\n    numericality: {\n      notValid: \"^此欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^此欄位的輸入數值需要大於等於零\"\n    }\n  },\n  oneTimeExpenses4: {\n    numericality: {\n      notValid: \"^此欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^此欄位的輸入數值需要大於等於零\"\n    }\n  }\n}\n\nconst userEditedDataConstraints = {\n  name: {\n    presence: {\n      message: \"^使用者名稱不得為空\",\n      allowEmpty: false\n    },\n\n  },\n  userImg: {\n    url: {\n      message: \"^請輸入正確圖片網址\"\n    }\n  }\n\n}\n\n\n//--------參數宣告 end--------\n\n\n\n\n\n//--------函士宣告 start--------\n\n//-------- 共用函式 start--------\nconst getFormData = (dom) => {\n  const formData = new FormData(dom);\n  const formDataObj = [...formData].reduce((acc, [name, values]) => {\n    acc[name] = values.trim();\n    return acc\n  }, {});\n  return formDataObj;\n}\n\nconst userInputCheck = (dom, constraints, datasetName) => {\n  let dataCheckBool = \"\";\n  const dataCheck = validate(dom, constraints);\n  // console.log(dataCheck);\n  if (dataCheck) {\n    Object.entries(dataCheck).forEach(([key, value]) => {\n      let dom = document.querySelector(`[${datasetName}=\"${key}\"]`);\n      let str = value.reduce((acc, crr) => {\n        acc += crr\n        return acc;\n      }, \"\")\n      if (dom) { dom.textContent = str; }\n\n    })\n    // Object.values(dataCheck).forEach((i) => {\n    //   console.log(i);\n    // })\n    dataCheckBool = false;\n  } else {\n    dataCheckBool = true;\n  }\n\n  return dataCheckBool;\n\n}\n\nconst sortoutData = (dataObj) => {\n  const result = Object.entries(dataObj).reduce((acc, [key, value]) => {\n    !value ? acc[key] = null : acc[key] = parseInt(value, 10);\n    return acc;\n  }, {})\n  return result;\n}\n\nconst removeReturnMessage = (listDom) => {\n  listDom.forEach((i) => {\n    i.textContent = \"\";\n  })\n}\n\n//--------首頁-財富自由計算機 start--------\n\n//整理formData取得的資料\nconst getClacDataObj = (obj) => {\n  const dataObj = {\n    annualExpenses: obj[\"年支出\"],\n    oneTimeExpenses1: obj[\"大筆支出1\"],\n    oneTimeExpensesTime1: obj[\"幾年後支出1\"],\n    oneTimeExpenses2: obj[\"大筆支出2\"],\n    oneTimeExpensesTime2: obj[\"幾年後支出2\"],\n    oneTimeExpenses3: obj[\"大筆支出3\"],\n    oneTimeExpensesTime3: obj[\"幾年後支出3\"],\n    annualInvestment: obj[\"每年投資金額\"],\n    currentInvestment: obj[\"已投入金額\"],\n    targetWithdrawalRate: obj[\"預估每年提領率\"],\n    expectedInvestmentAnnualReturn: obj[\"預估平均年報酬\"]\n  }\n\n  const makeDataNoEmpty = sortoutData(dataObj);\n  return makeDataNoEmpty;\n}\n\n//計算財富自由數字\nconst clacFINum = (obj) => {\n  const financialIndependenceNumber = (obj.annualExpenses / (obj.targetWithdrawalRate / 100)) + (obj.oneTimeExpenses1 / Math.pow((1 + obj.expectedInvestmentAnnualReturn / 100), obj.oneTimeExpensesTime1)) + (obj.oneTimeExpenses2 / Math.pow((1 + obj.expectedInvestmentAnnualReturn / 100), obj.oneTimeExpensesTime2)) + (obj.oneTimeExpenses3 / Math.pow((1 + obj.expectedInvestmentAnnualReturn / 100), obj.oneTimeExpensesTime3));\n  return financialIndependenceNumber;\n}\n\nconst untilFI = (obj, num) => {\n  // Math.log( (財富自由數字*投資報酬率+預估每年可存入金額)/(預估每年可存入金額+已投入金額*投資報酬率)) / Math.log(1+投資報酬率)\n  const untilFinancialIndependence = Math.log(((num * obj.expectedInvestmentAnnualReturn / 100) + obj.annualInvestment) / (obj.annualInvestment + (obj.currentInvestment * obj.expectedInvestmentAnnualReturn / 100))) / Math.log(1 + obj.expectedInvestmentAnnualReturn / 100);\n\n  return untilFinancialIndependence;\n}\n\n//渲染圖表\nconst renderClacChart = (FINum, crrInv, FIDays) => {\n  // index-clac-chart\n  let chart = c3.generate({\n    bindto: d3.select(\".index-clac-chart\"),\n    data: {\n      columns: [\n        [\"財富自由達成率\", crrInv],\n        [\"距離財富自由目標還有\", FINum - crrInv]\n      ],\n      order: null,\n      type: \"donut\",\n      colors: {\n        財富自由達成率: \"#03CBE6\",\n        距離財富自由目標還有: \"transparent\"\n      }\n    },\n    donut: {\n      title: \"距離財富自由還有\",\n      label: {\n        show: false\n      },\n      width: 20\n    },\n    legend: {\n      hide: \"距離財富自由目標還有\"\n    }\n  });\n\n  if (!Math.round(FIDays * 365) || !isFinite(FIDays)) {\n\n    d3.select(\".c3-chart-arcs-title\")\n      .style(\"dominant-baseline\", \"text-after-edge\")\n      .style(\"font-size\", \"20px\")\n      .attr(\"class\", \"fill-white\")\n      .insert(\"tspan\")\n      .attr(\"dy\", 50)\n      .attr(\"x\", 0)\n      .attr(\"font-size\", 40)\n      .text(\"？？？天\");\n  } else {\n    d3.select(\".c3-chart-arcs-title\")\n      .style(\"dominant-baseline\", \"text-after-edge\")\n      .style(\"font-size\", \"20px\")\n      .attr(\"class\", \"fill-white\")\n      .insert(\"tspan\")\n      .attr(\"dy\", 50)\n      .attr(\"x\", 0)\n      .attr(\"font-size\", 40)\n      .text(`${Math.round(FIDays * 365)}天`);\n  }\n\n  d3.select(\".c3-legend-item\")\n    .attr(\"class\", \"fill-white\")\n\n};\n\n\n//--------首頁-財富自由計算機 end--------\n\n\n\n//--------登入註冊功能 start--------\n\n\n\nconst userRegister = (data) => {\n  axios\n    .post(\"http://localhost:3000/register\", data)\n    .then((res) => {\n      // console.log(res.data);\n      alert(\"註冊成功\");\n      setTimeout(() => {\n        location.href = \"./login.html\";\n      }, 500);\n    })\n    .catch((err) => {\n      console.error(err);\n    })\n}\n\n//登入並把accessToken跟userId放入localStorage\n//這裡的post還不需要帶token\nconst userLogin = (data) => {\n  axios\n    .post(\"http://localhost:3000/login\", data)\n    .then((res) => {\n      localStorage.setItem(\"accessToken\", res.data.accessToken);\n      localStorage.setItem(\"userId\", res.data.user.id);\n      alert(\"登入成功\");\n      setTimeout(() => {\n        location.href = \"./userpage.html\";\n      }, 500);\n    })\n    .catch((err) => {\n      console.error(err);\n      alert(\"請確認帳號或密碼是否正確填寫\");\n    })\n}\n\n//登入確認，回傳fn(res)\nconst loginCheck = (data, callbackFn) => {\n  const userId = localStorage.getItem(\"userId\");\n  const userheaders = {\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n    }\n  }\n  // console.log(userId);\n  if (userId) {\n    axios\n      .get(`http://localhost:3000/600/users/${userId}`, userheaders)\n      .then((res) => {\n        if (res.status === 200) {\n          console.log(\"登入成功\");\n          callbackFn(res)\n        }\n\n      })\n      .catch((err) => {\n        if (err?.response?.status === 401) {\n          console.log(\"請重新登入\")\n          localStorage.removeItem(\"userId\");\n          localStorage.removeItem(\"accessToken\");\n        }\n        callbackFn(err.response);\n        // console.log(err.response);\n      })\n  } else {\n    callbackFn();\n  }\n}\n\n\n//不同身分渲染不同畫面\nconst renderUserNav = (status, isAdmin, userName) => {\n  console.log(status, isAdmin, userName)\n  if (status === 200 && isAdmin) {\n    // console.log(\"管理者\");\n    navDropdowmMenu.innerHTML = ` \n    <li><a class=\"dropdown-item text-center\">Hi~${userName}</a></li>\n    <hr class=\"m-1\">\n    <li><a class=\"dropdown-item text-center\" href=\"/userpage.html\">會員頁面</a></li>\n    <li><a class=\"dropdown-item text-center\" href=\"/backstage-users.html\">管理者後台</a></li>\n    <li><a class=\"dropdown-item text-center\" data-user-logout>登出</a></li>\n    `\n  } else if (status === 200) {\n    // console.log(\"一般會員\");\n    navDropdowmMenu.innerHTML = ` \n    <li><a class=\"dropdown-item text-center\">Hi~${userName}</a></li>\n    <hr class=\"m-1\">\n    <li><a class=\"dropdown-item text-center\" href=\"/userpage.html\">會員頁面</a></li>\n    <li><a class=\"dropdown-item text-center\" data-user-logout>登出</a></li>\n    `\n  } else if (status === 401) {\n    console.log(\"非會員\");\n  }\n}\n\n//不同使用者渲染不同頭像\nconst renderNavUserImg = (status, userImg) => {\n  const userId = localStorage.getItem(\"userId\");\n  if (status === 200) {\n    console.log(userImg);\n    navUserImg.innerHTML = \"\";\n    if (userImg) {\n      navUserImg.style.background = `url(\"${userImg}\") no-repeat center/cover`;\n    } else {\n      navUserImg.style.background = `url(\"https://images.unsplash.com/photo-1667925235667-627cf2759b2c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2071&q=80\") no-repeat center/cover`;\n    }\n    navUserImg.classList.add(\"rounded-circle\");\n  } else {\n    navUserImg.innerHTML = `<span class=\"usermenu-icon material-symbols-outlined text-primary align-middle\">account_circle</span>`;\n  }\n}\n\n//取得使用者FI資料\nconst getUserpageFIData = () => {\n  const userId = localStorage.getItem(\"userId\");\n  const userheaders = {\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n    }\n  }\n  if (userId) {\n    axios\n      .get(`http://localhost:3000/600/users/${userId}/userFIData`, userheaders)\n      .then((res) => {\n        if (res.data.length === 0) {\n          haveUserFIData = false;\n        } else {\n          haveUserFIData = true;\n          let fINum = Math.round(((res.data[0].annualExpenses / (res.data[0].targetWithdrawalRate / 100)) + res.data[0].oneTimeExpenses) * 100) / 100;\n          let fIDays = Math.round(Math.log(((fINum * res.data[0].expectedInvestmentAnnualReturn / 100) + res.data[0].annualInvestment) / (res.data[0].annualInvestment + (res.data[0].currentInvestment * res.data[0].expectedInvestmentAnnualReturn / 100))) / Math.log(1 + res.data[0].expectedInvestmentAnnualReturn / 100) * 100) / 100;\n          let crrInv = res.data[0].currentInvestment;\n          if (userpageFINumRenderAll.length) {\n            userpageFINumRenderAll.forEach((i) => {\n              let data = res.data[0][i.dataset.userpageFinumRender];\n              if (data) {\n                i.value = res.data[0][i.dataset.userpageFinumRender];\n                i.textContent = res.data[0][i.dataset.userpageFinumRender];\n              } else {\n                i.value = \"\";\n                i.textContent = \"???\";\n              }\n            })\n            if (userpageFINum) {\n              if (Number.isFinite(fINum)) {\n                userpageFINum.textContent = `${fINum}萬`;\n              } else {\n                userpageFINum.textContent = \"???萬\";\n              }\n\n            }\n            console.log(fINum, crrInv, fIDays);\n            if (fINum && crrInv && fIDays) {\n              renderUserClacChart(fINum, crrInv, fIDays);\n\n            }\n\n\n          }\n        }\n        userFIDataArr = res.data;\n\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n  }\n}\n\n//新增使用者FI資料\nconst postUserpageFIData = (data) => {\n  const userId = localStorage.getItem(\"userId\");\n  const userheaders = {\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n    }\n  }\n  if (userId) {\n    axios\n      .post(`http://localhost:3000/600/users/${userId}/userFIData`, data, userheaders)\n      .then((res) => {\n        console.log(res.data);\n        userFIDataArr = res.data;\n\n      })\n      .catch((err) => {\n        console.log(err.response);\n      })\n  }\n}\n\nconst patchUserpageFIData = (data) => {\n  const userId = localStorage.getItem(\"userId\");\n  const userheaders = {\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n    }\n  }\n  if (userId) {\n    console.log(userFIDataArr[0].id);\n    axios\n      .patch(`http://localhost:3000/600/userFIData/${userFIDataArr[0].id}`, data, userheaders)\n      .then((res) => {\n        console.log(res.data);\n        userFIDataArr = res.data;\n\n      })\n      .catch((err) => {\n        console.log(err.response);\n      })\n  }\n}\n\n//依據使用者輸入資料渲染c3圖型\nconst renderUserClacChart = (FINum, crrInv, FIDays) => {\n  let chart = c3.generate({\n    bindto: d3.select(\".user-clac-chart\"),\n    data: {\n      columns: [\n        [\"財富自由達成率\", crrInv],\n        [\"距離財富自由目標還有\", FINum - crrInv]\n      ],\n      order: null,\n      type: \"donut\",\n      colors: {\n        財富自由達成率: \"#03CBE6\",\n        距離財富自由目標還有: \"transparent\"\n      }\n    },\n    donut: {\n      title: \"距離財富自由還有\",\n      label: {\n        show: false\n      },\n      width: 20\n    },\n    legend: {\n      hide: \"距離財富自由目標還有\"\n    }\n  });\n\n  if (!Math.round(FIDays * 365) || !isFinite(FIDays)) {\n    d3.select(\".c3-chart-arcs-title\")\n      .style(\"dominant-baseline\", \"text-after-edge\")\n      .style(\"font-size\", \"20px\")\n      .insert(\"tspan\")\n      .attr(\"dy\", 50)\n      .attr(\"x\", 0)\n      .attr(\"font-size\", 40)\n      .text(\"？？？天\");\n  } else {\n    d3.select(\".c3-chart-arcs-title\")\n      .style(\"dominant-baseline\", \"text-after-edge\")\n      .style(\"font-size\", \"20px\")\n      .insert(\"tspan\")\n      .attr(\"dy\", 50)\n      .attr(\"x\", 0)\n      .attr(\"font-size\", 40)\n      .text(`${Math.round(FIDays * 365)}天`);\n  }\n\n  d3.selectAll(\".c3-chart-arc path\")\n    .attr(\"style\", \"stroke: #102A48;\")\n\n\n}\n\n//不同使用者渲染不同頁面資料\n\nconst renderUserpageUserData = (userImg, userName, userMail) => {\n  userpageName.textContent = userName;\n  userpageMail.textContent = userMail;\n  if (userImg) {\n    userpageImg.style.background = `url(\"${userImg}\") no-repeat center/cover`;\n  } else {\n    userpageImg.style.background = `url(\"https://images.unsplash.com/photo-1667925235667-627cf2759b2c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2071&q=80\") no-repeat center/cover`;\n  }\n}\n\nconst userLogout = () => {\n  localStorage.removeItem(\"userId\");\n  localStorage.removeItem(\"accessToken\");\n  alert(\"登出成功\");\n  location.href = \"/index.html\";\n}\n\n\n//--------登入註冊功能 end--------\n\n\n\n//--------抓取後台資料 start--------\n\nconst renderBackstageUser = (userImg) => {\n  console.log(userImg);\n  if (userImg) {\n    backstageUserImg.style.background = `url(\"${userImg}\") no-repeat center/cover`;\n  } else {\n    backstageUserImg.style.background = `url(\"https://images.unsplash.com/photo-1667925235667-627cf2759b2c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2071&q=80\") no-repeat center/cover`;\n  }\n}\n\nconst renderBackstageUserData = (data) => {\n  const returnData = data.reduce((acc, crr) => {\n    acc += `\n    <tr class=\"align-baseline\">\n      <th scope=\"row\">${crr.id}</th>\n      <td>${crr.name}</td>\n      <td>${crr.email}</td>\n      <td>${crr.isAdmin}</td>\n      <td>\n        <button type=\"button\" class=\"btn btn-outline-secondary\"  data-bs-toggle=\"modal\" data-bs-target=\"#showAndEdit${crr.id}\" data-backstage-showBtn data-backstage-user-id=\"${crr.id}\">查看/編輯</button>\n      </td>\n    </tr>\n    <div class=\"modal fade\" id=\"showAndEdit${crr.id}\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n      <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h1 class=\"modal-title fs-5\" id=\"exampleModalLabel\">user data</h1>\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <form action=\"\" class=\"w-100\" data-backstage-edit-userlist>\n            <div class=\"calc-area-form-group mb-2\">\n              <label class=\"me-2\" for=\"userId${crr.id}\">id：</label>\n              <input type=\"text\" class=\"w-80\" id=\"userId${crr.id}\" name=\"id\" value=\"${crr.id}\" disabled>\n              <span class=\"backstage-userData-edited-return d-block\" data-backstage-userData-edited-return-message-${crr.id}=\"id\"></span>\n            </div>\n            <div class=\"calc-area-form-group mb-2\">\n              <label class=\"me-2\" for=\"userName${crr.id}\">name：</label>\n              <input type=\"text\" class=\"w-80\" id=\"userName${crr.id}\" name=\"name\" value=\"${crr.name}\" data-edited-data-${crr.id}=\"name\">\n              <span class=\"backstage-userData-edited-return d-block\" data-backstage-userData-edited-return-message-${crr.id}=\"name\"></span>\n            </div>\n            <div class=\"calc-area-form-group mb-2\">\n              <label class=\"me-2\" for=\"userEmail${crr.id}\">email：</label>\n              <input type=\"text\" class=\"w-80\" id=\"userEmail${crr.id}\" name=\"email\" value=\"${crr.email}\" disabled>\n              <span class=\"backstage-userData-edited-return d-block\" data-backstage-userData-edited-return-message-${crr.id}=\"email\"></span>\n            </div>\n            <div class=\"calc-area-form-group mb-2\">\n              <label class=\"me-2\" for=\"userImg${crr.id}\">userImg：</label>\n              <input type=\"text\" class=\"w-80\" id=\"userImg${crr.id}\" name=\"userImg\" value=\"${crr.userImg}\" data-edited-data-${crr.id}=\"userImg\">\n              <span class=\"backstage-userData-edited-return d-block\" data-backstage-userData-edited-return-message-${crr.id}=\"userImg\"></span>\n            </div>\n            <div class=\"calc-area-form-group mb-2\">\n              <label class=\"me-2\" for=\"isAdmin${crr.id}\">isAdmin：</label>\n              <select class=\"w-80\" id=\"isAdmin${crr.id}\" name=\"isAdmin\" data-edited-data-${crr.id}=\"isAdmin\">\n                <option value=\"true\" ${(crr.isAdmin) ? \"selected\" : \"\"}>true</option>\n                <option value=\"false\" ${!(crr.isAdmin) ? \"selected\" : \"\"}>false</option>\n              </select>\n              <span class=\"backstage-userData-edited-return d-block\" data-backstage-userData-edited-return-message-${crr.id}=\"isAdmin\"></span>\n            </div>\n          </form>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">關閉</button>\n          <button type=\"button\" class=\"btn btn-danger\" data-backstage-user-save=\"${crr.id}\">存檔</button>\n        </div>\n      </div>\n    </div>\n    `\n    return acc;\n  }, \"\")\n  return returnData;\n}\n\nconst getAllUserData = (data, callbackFn) => {\n  const userId = localStorage.getItem(\"userId\");\n  const userheaders = {\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n    }\n  }\n  axios\n    .get(`http://localhost:3000/users`, userheaders)\n    .then((res) => {\n      if (res.status === 200) {\n        // console.log(res);\n        callbackFn(res);\n      }\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n}\n\nconst patchUserData = (data, selectedUserId) => {\n  const userId = localStorage.getItem(\"userId\");\n  const userheaders = {\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n    }\n  }\n  axios\n    .patch(`http://localhost:3000/users/${selectedUserId}`, data, userheaders)\n    .then((res) => {\n      console.log(res.data);\n      window.location.reload();\n    })\n    .catch((err) => {\n      console.error(err);\n    })\n}\n\nconst searchUserData = (keyword) => {\n  axios\n    .get(`http://localhost:3000/users?q=${keyword}`)\n    .then((res) => {\n      let resData = res.data\n      const searchData = renderBackstageUserData(res.data);\n      allUserData.innerHTML = searchData;\n    })\n    .catch((err) => {\n      console.error(err);\n    })\n}\n\nconst renderBackstagePostData = (data) => {\n  const resData = data.reduce((acc, crr) => {\n    acc += `\n    <tr class=\"align-baseline\">\n      <th scope=\"row\">${crr.id}</th>\n      <td>${crr.user.name}</td>\n      <td>${crr.title ? crr.title : \"無標題\"}</td>\n      <td>\n        <button type=\"button\" class=\"btn btn-outline-secondary\"  data-bs-toggle=\"modal\" data-bs-target=\"#showAndEdit${crr.id}\" data-backstage-showBtn>查看/編輯</button>\n        <button type=\"button\" class=\"btn btn-outline-danger\"  data-bs-toggle=\"modal\" data-bs-target=\"#delete${crr.id}\" data-backstage-deleteBtn>刪除</button>\n      </td>\n    </tr>\n    <div class=\"modal fade\" id=\"delete${crr.id}\" tabindex=\"-1\" aria-labelledby=\"thisPostDelete\" aria-hidden=\"true\">\n      <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h1 class=\"modal-title fs-5\" id=\"thisPostDelete\">delete post</h1>\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n          </div>\n          <div class=\"modal-body\">\n            是否確認要刪除此篇貼文？\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n            <button type=\"button\" class=\"btn btn-danger\" data-backstage-post-delete=\"${crr.id}\">刪除貼文</button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"modal fade\" id=\"showAndEdit${crr.id}\" tabindex=\"-1\" aria-labelledby=\"thisPostData\" aria-hidden=\"true\">\n      <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h1 class=\"modal-title fs-5\" id=\"thisPostData\">post data</h1>\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <form action=\"\" class=\"w-100\" data-backstage-edit-postlist>\n            <div class=\"calc-area-form-group mb-2\">\n              <label class=\"me-2\" for=\"postId${crr.id}\">id：</label>\n              <input type=\"text\" class=\"w-80\" id=\"postId${crr.id}\" name=\"id\" value=\"${crr.id}\" disabled>\n            </div>\n            <div class=\"calc-area-form-group mb-2\">\n              <label class=\"me-2\" for=\"userId${crr.id}\">userId：</label>\n              <input type=\"text\" class=\"w-80\" id=\"userId${crr.id}\" name=\"userId\" value=\"${crr.userId}\"  disabled>\n            </div>\n            <div class=\"calc-area-form-group mb-2\">\n              <label class=\"me-2\" for=\"userName${crr.id}\">userName：</label>\n              <input type=\"text\" class=\"w-80\" id=\"userName${crr.id}\" name=\"userName\" value=\"${crr.user.name}\" disabled>\n            </div>\n            <div class=\"calc-area-form-group mb-2\">\n              <label class=\"me-2\" for=\"title${crr.id}\">title：</label>\n              <input type=\"text\" class=\"w-80\" id=\"title${crr.id}\" name=\"title\" value=\"${crr.title ? crr.title : \"\"}\" data-edited-post-${crr.id}=\"title\">\n            </div>\n            <div class=\"calc-area-form-group mb-2\">\n              <label class=\"me-2\" for=\"content${crr.id}\">content：</label>\n              <textarea type=\"form-control\" rows=\"6\" class=\"w-100 d-block\" id=\"content${crr.id}\" name=\"content\" data-edited-post-${crr.id}=\"content\">${crr.content ? crr.content : \"<p></p>\"}</textarea>\n            </div>\n          </form>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">關閉</button>\n          <button type=\"button\" class=\"btn btn-primary\" data-backstage-post-save=\"${crr.id}\">儲存</button>\n        </div>\n      </div>\n    </div>\n    \n\n    `\n    return acc;\n  }, \"\")\n  return resData;\n}\n\nconst getAllPostData = (data, callbackFn) => {\n  const userId = localStorage.getItem(\"userId\");\n  const userheaders = {\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n    }\n  }\n  axios\n    .get(`http://localhost:3000/posts?_expand=user`, userheaders)\n    .then((res) => {\n      callbackFn(res);\n\n    })\n    .catch((err) => {\n      console.log(err);\n\n    })\n}\n\nconst postPostData = (data) => {\n  const userId = localStorage.getItem(\"userId\");\n  const userheaders = {\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n    }\n  }\n  axios\n    .post(`http://localhost:3000/600/users/${userId}/posts`, data, userheaders)\n    .then((res) => {\n      console.log(res.data);\n      window.location.reload();\n    })\n    .catch((err) => {\n      console.error(err);\n    })\n}\n\nconst patchPostData = (data, selectPostId) => {\n  const userId = localStorage.getItem(\"userId\");\n  const userheaders = {\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n    }\n  }\n  axios\n    .patch(`http://localhost:3000/posts/${selectPostId}`, data, userheaders)\n    .then((res) => {\n      console.log(res.data);\n      window.location.reload();\n    })\n    .catch((err) => {\n      console.error(err);\n    })\n}\n\nconst deletePostData = (selectPostId) => {\n  const userId = localStorage.getItem(\"userId\");\n  const userheaders = {\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n    }\n  }\n  axios\n    .delete(`http://localhost:3000/posts/${selectPostId}`, userheaders)\n    .then((res) => {\n      console.log(res);\n      window.location.reload();\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n}\n\n\nconst searchPostData = (keyword) =>{\n  axios\n    .get (`http://localhost:3000/posts?_expand=user&q=${keyword}`)\n    .then((res)=>{\n      console.log(res);\n      const searchData = renderBackstagePostData(res.data);\n      allPostData.innerHTML = searchData;\n\n    })\n    .catch((err)=>{\n      console.log(err);\n    })\n}\n\n//--------抓取後台資料 end--------\n\n\n//--------函士宣告 end--------\n\n\n\n\n\n//--------DOM元素監聽 start--------\n\n\n\n//首頁計算機功能\nif (clacBtn) {\n  clacBtn.addEventListener(\"click\", (e) => {\n    const formDataRow = getFormData(formList);\n    //getClacDataObj()整理Data這裡要處理，如果欄位未寫入，自動帶入null\n    const formData = getClacDataObj(formDataRow);\n    allInputReturnMessage.forEach((i) => {\n      i.textContent = \"\";\n    })\n    //userInputCheck()提領率跟投報率要有預設\n    const check = userInputCheck(formData, clacConstraints, \"data-input-return-message\");\n    if (check) {\n      //整合現有值，進行財富自由數字及天數的運算\n      const financialIndependenceNumber = Math.round(clacFINum(formData) * 100) / 100;\n      const financialIndependenceDays = untilFI(formData, financialIndependenceNumber);\n      console.log(financialIndependenceDays);\n      //運算完畢後回傳並渲染cs.js\n      renderClacChart(financialIndependenceNumber, formData.currentInvestment, financialIndependenceDays);\n      fINum.textContent = `${financialIndependenceNumber}萬`;\n    }\n  })\n}\n\n//註冊功能\nif (register) {\n  register.addEventListener(\"click\", (e) => {\n    const data = getFormData(registerForm);\n    delete data.passwordCheck;\n    removeReturnMessage(registerReturnMessage);\n    const check = userInputCheck(registerForm, registerConstraints, \"data-register-return-message\");\n    if (check) {\n      data[\"isAdmin\"] = false;\n      userRegister(data);\n    } else {\n      console.log(\"reject\");\n    }\n\n  })\n}\n\n//登入功能\nif (login) {\n  login.addEventListener(\"click\", (e) => {\n    const data = getFormData(loginForm);\n    removeReturnMessage(loginReturnMessage);\n    const check = userInputCheck(loginForm, loginConstraints, \"data-login-return-message\");\n    check ? userLogin(data) : console.log(\"reject\");\n  })\n}\n\n\n//會員頁面功能\n\n//會員頁面使用者輸入後計算並更新\nif (userpageFormAnnualExpenses) {\n  userpageFormAnnualExpenses.addEventListener(\"input\", (e) => {\n    const rowData = getFormData(userpageFormAnnualExpenses);\n    const data = sortoutData(rowData);\n    removeReturnMessage(userpageFINumAnnualExpensesReturnMessage);\n    const check = userInputCheck(userpageFormAnnualExpenses, userpageAnnualExpensesConstraints, \"data-userpage-FINum-annualExpenses-return-message\");\n    if (check) {\n      const clac = Object.entries(data).reduce((sum, [key, value]) => {\n        value ? sum += value : sum += 0;\n        return sum;\n      }, 0)\n      userpageAnnualExpensesDom.value = clac;\n    }\n\n  })\n}\n\nif (userpageFormOneTimeExpenses) {\n  userpageFormOneTimeExpenses.addEventListener(\"input\", (e) => {\n    const rowData = getFormData(userpageFormOneTimeExpenses);\n    const data = sortoutData(rowData);\n    removeReturnMessage(userpageFINumOneTimeExpensesReturnMessage);\n    const check = userInputCheck(userpageFormOneTimeExpenses, userpageOneTimeExpensesConstraints, \"data-userpage-FINum-oneTimeExpenses-return-message\");\n    const num = e.target.dataset.onetimeexpenses;\n    const oneTimeExpenses = data[`oneTimeExpenses${num}`];\n    let oneTimeExpensesTime = data[`oneTimeExpensesTime${num}`];\n    let investmentAnnualReturn = userpageExpectedInvestmentAnnualReturn.value;\n    const currentValueDom = document.querySelector(`[data-userpage-FINum-oneTimeExpenses=\"oneTimeExpenses${num}\"]`);\n    let sum = 0;\n    if (check) {\n      if (oneTimeExpenses) {\n        oneTimeExpensesTime ? oneTimeExpensesTime : oneTimeExpensesTime = 0;\n        const clacData = Math.round(oneTimeExpenses / Math.pow((1 + investmentAnnualReturn / 100), oneTimeExpensesTime) * 100) / 100;\n        currentValueDom.textContent = `${clacData}`;\n        currentValueDom.value = `${clacData}`;\n      } else {\n        currentValueDom.textContent = \"???\";\n        currentValueDom.value = \"\";\n      }\n    }\n    userpageFINumOneTimeExpensesValue.forEach((i) => {\n      if (i.value) { sum += parseInt(i.value * 100) / 100; }\n    })\n    userpageOneTimeExpensesDom.value = sum;\n  })\n}\n\nif (userpageExpectedInvestmentAnnualReturn) {\n  userpageExpectedInvestmentAnnualReturn.addEventListener(\"input\", (e) => {\n    console.log(e.target);\n\n  })\n}\n\n\n\n//會員頁面計算財富自由目標\nif (userpageClacBtnTop) {\n  userpageClacBtnTop.addEventListener(\"click\", (e) => {\n    e.preventDefault();\n    let obj = {};\n    userpageSum.forEach((i) => {\n      i.value ? obj[i.name] = parseInt(i.value * 100) / 100 : obj[i.name] = 0;\n    })\n    let result = Math.round(((obj.annualExpenses / (obj.targetWithdrawalRate / 100)) + obj.oneTimeExpenses) * 100) / 100;\n    if (haveUserFIData) {\n      patchUserpageFIData(obj);\n    } else {\n      postUserpageFIData(obj);\n      haveUserFIData = true;\n    }\n    if (result) {\n      userpageFINum.textContent = result;\n    } else {\n      userpageFINum.textContent = \"???\";\n    }\n\n  })\n}\n\nif (userpageClacBtnDown) {\n  userpageClacBtnDown.addEventListener(\"click\", (e) => {\n    e.preventDefault();\n    let obj = {};\n    userpageSum.forEach((i) => {\n      i.value ? obj[i.name] = parseInt(i.value * 100) / 100 : obj[i.name] = 0;\n    })\n    let result = Math.round(((obj.annualExpenses / (obj.targetWithdrawalRate / 100)) + obj.oneTimeExpenses) * 100) / 100;\n    if (haveUserFIData) {\n      patchUserpageFIData(obj);\n    } else {\n      postUserpageFIData(obj);\n      haveUserFIData = true;\n    }\n    if (result) {\n      userpageFINum.textContent = result;\n      alert(\"財富自由目標已計算完成~\");\n    } else {\n      userpageFINum.textContent = \"???\";\n    }\n\n  })\n}\n\n\nif (userpageBtnWrap) {\n  userpageBtnWrap.addEventListener(\"click\", (e) => {\n    e.preventDefault();\n    let saveBtn = e.target.dataset.userpageSavebtn;\n    let editBtn = e.target.dataset.userpageEditbtn;\n    if (saveBtn) {\n      let saveDom = document.querySelector(`[data-userpage-content=\"${e.target.dataset.userpageSavebtn}\"]`);\n      let selector = document.querySelector(`[data-userpage-FINum-render=\"${saveBtn}\"]`);\n      let updateData = {};\n      if (selector.value) {\n        updateData[saveBtn] = parseInt(selector.value * 100) / 100;\n\n        if (saveBtn === \"expectedInvestmentAnnualReturn\" || saveBtn === \"targetWithdrawalRate\") {\n          saveDom.innerHTML = `<span data-userpage-FINum-render=\"currentInvestment\" data-userpage-FINum-render=\"${saveBtn}\" value=\"${selector.value}\">${selector.value}</span>%`\n        } else {\n          saveDom.innerHTML = `<span data-userpage-FINum-render=\"currentInvestment\" data-userpage-FINum-render=\"${saveBtn}\" value=\"${selector.value}\">${selector.value}</span>萬`\n        }\n      } else {\n        updateData[saveBtn] = 0;\n        if (saveBtn === \"expectedInvestmentAnnualReturn\" || saveBtn === \"targetWithdrawalRate\") {\n          saveDom.innerHTML = `<span data-userpage-FINum-render=\"currentInvestment\" data-userpage-FINum-render=\"${saveBtn}\" value=\"\">???</span>%`\n        } else {\n          saveDom.innerHTML = `<span data-userpage-FINum-render=\"currentInvestment\" data-userpage-FINum-render=\"${saveBtn}\" value=\"\">???</span>萬`\n        }\n      }\n      if (haveUserFIData) {\n        patchUserpageFIData(updateData);\n        window.location.reload();\n      } else {\n        postUserpageFIData(updateData);\n        haveUserFIData = true;\n        window.location.reload();\n      }\n\n    } else if (editBtn) {\n      let editDom = document.querySelector(`[data-userpage-content=\"${e.target.dataset.userpageEditbtn}\"]`);\n      if (userFIDataArr.length) {\n        let fIDatavalue = userFIDataArr[0][e.target.dataset.userpageEditbtn];\n        if (!fIDatavalue) { fIDatavalue = \"\"; }\n        editDom.innerHTML = `\n        <form action=\"\" name=\"form\">\n        <input class=\"text-center\" data-userpage-FINum-render=\"${editBtn}\" value=\"${fIDatavalue}\">\n        </form>\n        `;\n      }\n      editDom.innerHTML = `\n        <form action=\"\" name=\"form\">\n        <input class=\"text-center\" data-userpage-FINum-render=\"${editBtn}\" value=\"\">\n        </form>\n        `;\n    }\n\n  })\n}\n\nif (allUserData) {\n  allUserData.addEventListener(\"click\", (e) => {\n    // selectedUserId = e.target.dataset.backstageUserId;\n    let selectedUserSave = e.target.dataset.backstageUserSave;\n\n    if (selectedUserSave) {\n      let editedDataDom = document.querySelectorAll(`[data-edited-data-${selectedUserSave}]`);\n      let returnMessageDom = document.querySelectorAll(`[data-backstage-userData-edited-return-message-${selectedUserSave}`);\n      let editedData = {};\n      editedDataDom.forEach((i) => {\n        if (i.name === \"isAdmin\") {\n          let bool = i.value === \"false\" ? false : true;\n          editedData[\"isAdmin\"] = bool;\n        } else {\n          editedData[i.name] = i.value;\n        }\n      })\n      returnMessageDom.forEach((i) => {\n        i.textContent = \"\";\n      })\n      const check = validate(editedData, userEditedDataConstraints);\n      console.log(check);\n      if (check) {\n        Object.entries(check).forEach(([key, value]) => {\n          let dom = document.querySelector(`[data-backstage-userData-edited-return-message-${selectedUserSave}=\"${key}\"]`);\n          let str = value.reduce((acc, crr) => {\n            acc += crr\n            return acc;\n          }, \"\")\n\n          dom.textContent = str;\n        })\n      } else {\n        patchUserData(editedData, selectedUserSave);\n      }\n      console.log(editedData);\n    }\n  })\n}\n\nif (backstageUserSearchOuter) {\n  backstageUserSearchOuter.addEventListener(\"click\", (e) => {\n    e.preventDefault();\n    const target = e.target.dataset.backstageUserSearch;\n    if (target === \"btn\") {\n      const keyword = backstageUserSearchKeyword.value;\n      searchUserData(keyword);\n    }\n  })\n}\n\nif (backstagePostsAddbtn) {\n  backstagePostsAddbtn.addEventListener(\"click\", (e) => {\n    console.log(e);\n    postPostData(\"\");\n\n  })\n}\n\nif (allPostData) {\n  allPostData.addEventListener(\"click\", (e) => {\n    const selectedPostSave = e.target.dataset.backstagePostSave;\n    const selectedPostDelete = e.target.dataset.backstagePostDelete;\n    if (selectedPostSave) {\n      let editedDataDom = document.querySelectorAll(`[data-edited-post-${selectedPostSave}]`)\n      let editedData = {};\n      editedDataDom.forEach((i) => {\n        editedData[i.name] = i.value;\n      })\n      patchPostData(editedData, selectedPostSave);\n    }\n\n    if (selectedPostDelete) {\n      const deleteDataDom = document.querySelector(`[data-backstage-post-delete=\"${selectedPostDelete}\"]`)\n      deletePostData(selectedPostDelete);\n    }\n\n  })\n}\n\nif (backstagePostSearchOuter) {\n  backstagePostSearchOuter.addEventListener(\"click\",(e)=>{\n    e.preventDefault();\n    const target = e.target.dataset.backstagePostSearch;\n    console.log(target);\n    if (target === \"btn\") {\n      const keyword = backstagePostSearchKeyword.value;\n      searchPostData(keyword);\n    }\n    \n  })\n}\n\n//--------DOM元素監聽 end--------\n\n//畫面載入時，判斷是否是登入狀態\nwindow.onload = () => {\n  loginCheck(\"\", (res) => {\n    // console.log(res);\n    if (res) {\n      checkLoginstatus = res.status;\n      checkUserIsAdmin = res.data.isAdmin;\n      checkUserImg = res.data.userImg;\n      checkUserName = res.data.name;\n      checkUserEmail = res.data.email;\n\n      if (res?.status === 401) {\n        renderUserNav(401, false);\n      } else if (res?.status === 200 && res?.data?.isAdmin) {\n        if (location.pathname === \"/backstage-users.html\" || location.pathname === \"/backstage-posts.html\") {\n          renderBackstageUser(res.data.userImg);\n        } else {\n          renderNavUserImg(200, res.data.userImg);\n        }\n        renderUserNav(200, true, res.data.name);\n        const logoutBtn = document.querySelector(\"[data-user-logout]\");\n        if (logoutBtn) {\n          logoutBtn.addEventListener(\"click\", (e) => {\n            checkUserIsAdmin = \"\";\n            checkUserImg = \"\";\n            checkUserName = \"\";\n            checkUserEmail = \"\";\n            userLogout();\n          })\n        }\n      } else if (res?.status === 200) {\n        renderUserNav(200, false, res.data.name);\n        renderNavUserImg(200, res.data.userImg);\n        const logoutBtn = document.querySelector(\"[data-user-logout]\");\n        if (logoutBtn) {\n          logoutBtn.addEventListener(\"click\", (e) => {\n            checkUserIsAdmin = \"\";\n            checkUserImg = \"\";\n            checkUserName = \"\";\n            checkUserEmail = \"\";\n            userLogout();\n          })\n        }\n      }\n    } else {\n      console.log(\"訪客模式\");\n      if (navUserImg) {\n        renderNavUserImg(\"\", false);\n      }\n\n    }\n\n  })\n  //載入就先取userFIData\n  getUserpageFIData();\n}\n\n\n\n\n\n//當在會員頁面，進行判斷是否有登入，如果有登入撈資料給他瀏覽，如果沒登入請他登入\nif (location.pathname === \"/userpage.html\") {\n  loginCheck(\"\", (res) => {\n    if (res) {\n      if (res.status === 401) {\n        setTimeout(() => {\n          location.href = \"./login.html\"\n        }, 500);\n        alert(\"請重新登入\");\n      }\n    } else {\n      setTimeout(() => {\n        location.href = \"./login.html\"\n      }, 500);\n      alert(\"請重新登入\");\n    }\n    renderUserClacChart(30, 20, \"?\");\n    renderUserpageUserData(res.data.userImg, res.data.name, res.data.email);\n  })\n\n}\n\nif (location.pathname === \"/userpage-FINum.html\") {\n\n  userpageSum.forEach((i) => {\n    console.log(i.value);\n  })\n}\n\nif (location.pathname === \"/backstage-users.html\") {\n  loginCheck(\"\", (res) => {\n    if (res) {\n      if (res.status === 401) {\n        location.href = \"./login.html\"\n        alert(\"請重新登入\");\n      }\n    } else {\n      location.href = \"./login.html\"\n      alert(\"請重新登入\");\n    }\n  })\n  getAllUserData(\"\", (res) => {\n    const userData = renderBackstageUserData(res.data);\n    allUserData.innerHTML = userData;\n\n  });\n\n\n}\n\nif (location.pathname === \"/backstage-posts.html\") {\n  loginCheck(\"\", (res) => {\n    if (res) {\n      if (res.status === 401) {\n        setTimeout(() => {\n          location.href = \"./login.html\"\n        }, 500);\n        alert(\"請重新登入\");\n      }\n    } else {\n      setTimeout(() => {\n        location.href = \"./login.html\"\n      }, 500);\n      alert(\"請重新登入\");\n    }\n\n  })\n  getAllPostData(\"\", (res) => {\n    console.log(res);\n    const resData = res.data;\n    let postData = renderBackstagePostData(resData);\n    allPostData.innerHTML = postData;\n  })\n}\n\n\n\n\n//先渲染畫面\nrenderClacChart(30, 20, \"?\");\n\nconsole.log(location.pathname);\n\n\n\n\n\n\n\n\n\n\n"]}