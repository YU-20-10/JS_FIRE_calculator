{"version":3,"sources":["all.js"],"names":["navDropdowmMenu","document","querySelector","navUserImg","register","registerForm","login","loginForm","formList","clacBtn","fINum","userPage","userpageImg","userpageName","userpageMail","backstageUserImg","allUserData","allPostData","userpageFINum","fINumAnnualExpenses","fINumAnnualExpensesForm","fINumOnetimeExpenses","fINumOnetimeExpensesForm","fINumOnetimeExpenses1","fINumOnetimeExpenses2","fINumOnetimeExpenses3","fINumOnetimeExpenses4","fINumWithdrawalRate","fINumInvestReturn","freeNum","howFarToFree","loginConstraints","email","presence","message","password","length","minimum","maximum","format","pattern","registerConstraints","name","passwordCheck","equality","attribute","clacConstraints","annualExpenses","numericality","notValid","greaterThanOrEqualTo","notGreaterThanOrEqualTo","oneTimeExpenses1","oneTimeExpensesTime1","oneTimeExpenses2","oneTimeExpensesTime2","oneTimeExpenses3","oneTimeExpensesTime3","annualInvestment","currentInvestment","targetWithdrawalRate","expectedInvestmentAnnualReturn","getFormData","dom","formData","FormData","formDataObj","reduce","acc","values","trim","userInputCheck","constraints","dataCheckBool","dataCheck","validate","console","log","Object","forEach","i","getClacDataObj","obj","DataObj","makeDataNoEmpty","entries","key","value","parseInt","clacFINum","financialIndependenceNumber","Math","pow","untilFI","num","untilFinancialIndependence","renderClacChart","FINum","crrInv","FIDays","chart","c3","generate","bindto","d3","select","data","columns","order","type","colors","財富自由達成率","距離財富自由目標還有","donut","title","label","show","width","legend","hide","round","isFinite","style","attr","insert","text","userRegister","axios","post","then","res","alert","setTimeout","location","href","err","error","userLogin","localStorage","setItem","accessToken","user","id","loginCheck","callbackFn","userId","getItem","userheaders","headers","Authorization","get","status","response","removeItem","renderUserNav","isAdmin","userName","innerHTML","renderNavUserImg","userImg","background","classList","add","getUserpageFIData","renderUserClacChart","renderUserpageUserData","userMail","textContent","userLogout","renderBackstageUser","getAllUserData","getAllPostData","addEventListener","e","formDataRow","check","financialIndependenceDays","window","onload","pathname","logoutBtn","userData","crr","postData","content"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AACA;AACA,IAAMA,eAAe,GAAGC,QAAQ,CAACC,aAAT,CAAuB,0BAAvB,CAAxB;AACA,IAAMC,UAAU,GAAGF,QAAQ,CAACC,aAAT,CAAuB,qBAAvB,CAAnB;AAEA,IAAME,QAAQ,GAAGH,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,CAAjB;AACA,IAAMG,YAAY,GAAGJ,QAAQ,CAACC,aAAT,CAAuB,sBAAvB,CAArB;AAEA,IAAMI,KAAK,GAAGL,QAAQ,CAACC,aAAT,CAAuB,cAAvB,CAAd;AACA,IAAMK,SAAS,GAAGN,QAAQ,CAACC,aAAT,CAAuB,mBAAvB,CAAlB;AAEA,IAAMM,QAAQ,GAAGP,QAAQ,CAACC,aAAT,CAAuB,kBAAvB,CAAjB;AACA,IAAMO,OAAO,GAAGR,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,CAAhB;AACA,IAAMQ,KAAK,GAAGT,QAAQ,CAACC,aAAT,CAAuB,cAAvB,CAAd;AAEA,IAAMS,QAAQ,GAAGV,QAAQ,CAACC,aAAT,CAAuB,kBAAvB,CAAjB;AACA,IAAMU,WAAW,GAAGX,QAAQ,CAACC,aAAT,CAAuB,0BAAvB,CAApB;AACA,IAAMW,YAAY,GAAGZ,QAAQ,CAACC,aAAT,CAAuB,2BAAvB,CAArB;AACA,IAAMY,YAAY,GAAGb,QAAQ,CAACC,aAAT,CAAuB,2BAAvB,CAArB;AAEA,IAAMa,gBAAgB,GAAGd,QAAQ,CAACC,aAAT,CAAuB,0BAAvB,CAAzB;AACA,IAAMc,WAAW,GAAGf,QAAQ,CAACC,aAAT,CAAuB,wBAAvB,CAApB;AACA,IAAMe,WAAW,GAAGhB,QAAQ,CAACC,aAAT,CAAuB,wBAAvB,CAApB;AAEA,IAAMgB,aAAa,GAAGjB,QAAQ,CAACC,aAAT,CAAuB,uBAAvB,CAAtB;AACA,IAAMiB,mBAAmB,GAAGlB,QAAQ,CAACC,aAAT,CAAuB,8BAAvB,CAA5B;AACA,IAAMkB,uBAAuB,GAAGnB,QAAQ,CAACC,aAAT,CAAuB,mCAAvB,CAAhC;AACA,IAAMmB,oBAAoB,GAAGpB,QAAQ,CAACC,aAAT,CAAuB,+BAAvB,CAA7B;AACA,IAAMoB,wBAAwB,GAAGrB,QAAQ,CAACC,aAAT,CAAuB,oCAAvB,CAAjC;AACA,IAAMqB,qBAAqB,GAAGtB,QAAQ,CAACC,aAAT,CAAuB,iCAAvB,CAA9B;AACA,IAAMsB,qBAAqB,GAAGvB,QAAQ,CAACC,aAAT,CAAuB,iCAAvB,CAA9B;AACA,IAAMuB,qBAAqB,GAAGxB,QAAQ,CAACC,aAAT,CAAuB,iCAAvB,CAA9B;AACA,IAAMwB,qBAAqB,GAAGzB,QAAQ,CAACC,aAAT,CAAuB,iCAAvB,CAA9B;AACA,IAAMyB,mBAAmB,GAAG1B,QAAQ,CAACC,aAAT,CAAuB,8BAAvB,CAA5B;AACA,IAAM0B,iBAAiB,GAAG3B,QAAQ,CAACC,aAAT,CAAuB,4BAAvB,CAA1B,C,CAGA;AAOA;;AACA,IAAM2B,OAAO,GAAG,CAAhB;AACA,IAAMC,YAAY,GAAG,CAArB;AACA,IAAMC,gBAAgB,GAAG;AACvBC,EAAAA,KAAK,EAAE;AACLC,IAAAA,QAAQ,EAAE;AACRC,MAAAA,OAAO,EAAE;AADD,KADL;AAILF,IAAAA,KAAK,EAAE;AACLE,MAAAA,OAAO,EAAE;AADJ;AAJF,GADgB;AASvBC,EAAAA,QAAQ,EAAE;AACRF,IAAAA,QAAQ,EAAE;AACRC,MAAAA,OAAO,EAAE;AADD,KADF;AAIRE,IAAAA,MAAM,EAAE;AACNC,MAAAA,OAAO,EAAE,CADH;AAENC,MAAAA,OAAO,EAAE,EAFH;AAGNJ,MAAAA,OAAO,EAAE;AAHH,KAJA;AASRK,IAAAA,MAAM,EAAE;AACNC,MAAAA,OAAO,EAAE,WADH;AAENN,MAAAA,OAAO,EAAE;AAFH;AATA;AATa,CAAzB;AAwBA,IAAMO,mBAAmB,GAAG;AAC1BC,EAAAA,IAAI,EAAE;AACJT,IAAAA,QAAQ,EAAE;AACRC,MAAAA,OAAO,EAAE;AADD,KADN;AAIJE,IAAAA,MAAM,EAAE;AACNC,MAAAA,OAAO,EAAE,CADH;AAENC,MAAAA,OAAO,EAAE,EAFH;AAGNJ,MAAAA,OAAO,EAAE;AAHH;AAJJ,GADoB;AAW1BF,EAAAA,KAAK,EAAE;AACLC,IAAAA,QAAQ,EAAE;AACRC,MAAAA,OAAO,EAAE;AADD,KADL;AAILF,IAAAA,KAAK,EAAE;AACLE,MAAAA,OAAO,EAAE;AADJ;AAJF,GAXmB;AAmB1BC,EAAAA,QAAQ,EAAE;AACRF,IAAAA,QAAQ,EAAE;AACRC,MAAAA,OAAO,EAAE;AADD,KADF;AAIRE,IAAAA,MAAM,EAAE;AACNC,MAAAA,OAAO,EAAE,CADH;AAENC,MAAAA,OAAO,EAAE,EAFH;AAGNJ,MAAAA,OAAO,EAAE;AAHH,KAJA;AASRK,IAAAA,MAAM,EAAE;AACNC,MAAAA,OAAO,EAAE,WADH;AAENN,MAAAA,OAAO,EAAE;AAFH;AATA,GAnBgB;AAiC1BS,EAAAA,aAAa,EAAE;AACbC,IAAAA,QAAQ,EAAE;AACRC,MAAAA,SAAS,EAAE,UADH;AAERX,MAAAA,OAAO,EAAE;AAFD;AADG;AAjCW,CAA5B;AAyCA,IAAMY,eAAe,GAAG;AACtBC,EAAAA,cAAc,EAAE;AACdC,IAAAA,YAAY,EAAE;AACZC,MAAAA,QAAQ,EAAE,WADE;AAEZC,MAAAA,oBAAoB,EAAE,CAFV;AAGZC,MAAAA,uBAAuB,EAAE;AAHb;AADA,GADM;AAQtBC,EAAAA,gBAAgB,EAAE;AAChBJ,IAAAA,YAAY,EAAE;AACZC,MAAAA,QAAQ,EAAE,WADE;AAEZC,MAAAA,oBAAoB,EAAE,CAFV;AAGZC,MAAAA,uBAAuB,EAAE;AAHb;AADE,GARI;AAetBE,EAAAA,oBAAoB,EAAE;AACpBL,IAAAA,YAAY,EAAE;AACZC,MAAAA,QAAQ,EAAE,WADE;AAEZC,MAAAA,oBAAoB,EAAE,CAFV;AAGZC,MAAAA,uBAAuB,EAAE;AAHb;AADM,GAfA;AAsBtBG,EAAAA,gBAAgB,EAAE;AAChBN,IAAAA,YAAY,EAAE;AACZC,MAAAA,QAAQ,EAAE,WADE;AAEZC,MAAAA,oBAAoB,EAAE,CAFV;AAGZC,MAAAA,uBAAuB,EAAE;AAHb;AADE,GAtBI;AA6BtBI,EAAAA,oBAAoB,EAAE;AACpBP,IAAAA,YAAY,EAAE;AACZC,MAAAA,QAAQ,EAAE,WADE;AAEZC,MAAAA,oBAAoB,EAAE,CAFV;AAGZC,MAAAA,uBAAuB,EAAE;AAHb;AADM,GA7BA;AAoCtBK,EAAAA,gBAAgB,EAAE;AAChBR,IAAAA,YAAY,EAAE;AACZC,MAAAA,QAAQ,EAAE,WADE;AAEZC,MAAAA,oBAAoB,EAAE,CAFV;AAGZC,MAAAA,uBAAuB,EAAE;AAHb;AADE,GApCI;AA2CtBM,EAAAA,oBAAoB,EAAE;AACpBT,IAAAA,YAAY,EAAE;AACZC,MAAAA,QAAQ,EAAE,WADE;AAEZC,MAAAA,oBAAoB,EAAE,CAFV;AAGZC,MAAAA,uBAAuB,EAAE;AAHb;AADM,GA3CA;AAkDtBO,EAAAA,gBAAgB,EAAE;AAChBV,IAAAA,YAAY,EAAE;AACZC,MAAAA,QAAQ,EAAE,WADE;AAEZC,MAAAA,oBAAoB,EAAE,CAFV;AAGZC,MAAAA,uBAAuB,EAAE;AAHb;AADE,GAlDI;AAyDtBQ,EAAAA,iBAAiB,EAAE;AACjBX,IAAAA,YAAY,EAAE;AACZC,MAAAA,QAAQ,EAAE,WADE;AAEZC,MAAAA,oBAAoB,EAAE,CAFV;AAGZC,MAAAA,uBAAuB,EAAE;AAHb;AADG,GAzDG;AAgEtBS,EAAAA,oBAAoB,EAAE;AACpBZ,IAAAA,YAAY,EAAE;AACZC,MAAAA,QAAQ,EAAE,WADE;AAEZC,MAAAA,oBAAoB,EAAE,CAFV;AAGZC,MAAAA,uBAAuB,EAAE;AAHb;AADM,GAhEA;AAuEtBU,EAAAA,8BAA8B,EAAE;AAC9Bb,IAAAA,YAAY,EAAE;AACZC,MAAAA,QAAQ,EAAE,WADE;AAEZC,MAAAA,oBAAoB,EAAE,CAFV;AAGZC,MAAAA,uBAAuB,EAAE;AAHb;AADgB;AAvEV,CAAxB,C,CAiFA;AAMA;AAEA;;AACA,IAAMW,WAAW,GAAG,SAAdA,WAAc,CAACC,GAAD,EAAS;AAC3B,MAAMC,QAAQ,GAAG,IAAIC,QAAJ,CAAaF,GAAb,CAAjB;;AACA,MAAMG,WAAW,GAAG,mBAAIF,QAAJ,EAAcG,MAAd,CAAqB,UAACC,GAAD,QAAyB;AAAA;AAAA,QAAlB1B,IAAkB;AAAA,QAAZ2B,MAAY;;AAChED,IAAAA,GAAG,CAAC1B,IAAD,CAAH,GAAY2B,MAAM,CAACC,IAAP,EAAZ;AACA,WAAOF,GAAP;AACD,GAHmB,EAGjB,EAHiB,CAApB;;AAIA,SAAOF,WAAP;AACD,CAPD;;AASA,IAAMK,cAAc,GAAG,SAAjBA,cAAiB,CAACR,GAAD,EAAMS,WAAN,EAAsB;AAC3C,MAAIC,aAAa,GAAG,EAApB;AACA,MAAMC,SAAS,GAAGC,QAAQ,CAACZ,GAAD,EAAMS,WAAN,CAA1B;AACAI,EAAAA,OAAO,CAACC,GAAR,CAAYH,SAAZ;;AACA,MAAIA,SAAJ,EAAe;AACbI,IAAAA,MAAM,CAACT,MAAP,CAAcK,SAAd,EAAyBK,OAAzB,CAAiC,UAACC,CAAD,EAAO;AACtCJ,MAAAA,OAAO,CAACC,GAAR,CAAYG,CAAZ;AACD,KAFD;AAGAP,IAAAA,aAAa,GAAG,KAAhB;AACD,GALD,MAKO;AACLA,IAAAA,aAAa,GAAG,IAAhB;AACD;;AACD,SAAOA,aAAP;AACD,CAbD,C,CAeA;AAEA;;;AACA,IAAMQ,cAAc,GAAG,SAAjBA,cAAiB,CAACC,GAAD,EAAS;AAC9B,MAAMC,OAAO,GAAG;AACdpC,IAAAA,cAAc,EAAEmC,GAAG,CAAC,KAAD,CADL;AAEd9B,IAAAA,gBAAgB,EAAE8B,GAAG,CAAC,OAAD,CAFP;AAGd7B,IAAAA,oBAAoB,EAAE6B,GAAG,CAAC,QAAD,CAHX;AAId5B,IAAAA,gBAAgB,EAAE4B,GAAG,CAAC,OAAD,CAJP;AAKd3B,IAAAA,oBAAoB,EAAE2B,GAAG,CAAC,QAAD,CALX;AAMd1B,IAAAA,gBAAgB,EAAE0B,GAAG,CAAC,OAAD,CANP;AAOdzB,IAAAA,oBAAoB,EAAEyB,GAAG,CAAC,QAAD,CAPX;AAQdxB,IAAAA,gBAAgB,EAAEwB,GAAG,CAAC,QAAD,CARP;AASdvB,IAAAA,iBAAiB,EAAEuB,GAAG,CAAC,OAAD,CATR;AAUdtB,IAAAA,oBAAoB,EAAEsB,GAAG,CAAC,SAAD,CAVX;AAWdrB,IAAAA,8BAA8B,EAAEqB,GAAG,CAAC,SAAD;AAXrB,GAAhB;AAaA,MAAME,eAAe,GAAGN,MAAM,CAACO,OAAP,CAAeF,OAAf,EAAwBhB,MAAxB,CAA+B,UAACC,GAAD,SAAuB;AAAA;AAAA,QAAhBkB,GAAgB;AAAA,QAAXC,KAAW;;AAC5E,KAACA,KAAD,GAASnB,GAAG,CAACkB,GAAD,CAAH,GAAW,CAApB,GAAwBlB,GAAG,CAACkB,GAAD,CAAH,GAAWE,QAAQ,CAACD,KAAD,EAAQ,EAAR,CAA3C;AACA,WAAOnB,GAAP;AACD,GAHuB,EAGrB,EAHqB,CAAxB;AAIA,SAAOgB,eAAP;AACD,CAnBD,C,CAqBA;;;AACA,IAAMK,SAAS,GAAG,SAAZA,SAAY,CAACP,GAAD,EAAS;AACzB,MAAMQ,2BAA2B,GAAIR,GAAG,CAACnC,cAAJ,IAAsBmC,GAAG,CAACtB,oBAAJ,GAA2B,GAAjD,CAAD,GAA2DsB,GAAG,CAAC9B,gBAAJ,GAAuBuC,IAAI,CAACC,GAAL,CAAU,IAAIV,GAAG,CAACrB,8BAAJ,GAAqC,GAAnD,EAAyDqB,GAAG,CAAC7B,oBAA7D,CAAlF,GAAyK6B,GAAG,CAAC5B,gBAAJ,GAAuBqC,IAAI,CAACC,GAAL,CAAU,IAAIV,GAAG,CAACrB,8BAAJ,GAAqC,GAAnD,EAAyDqB,GAAG,CAAC3B,oBAA7D,CAAhM,GAAuR2B,GAAG,CAAC1B,gBAAJ,GAAuBmC,IAAI,CAACC,GAAL,CAAU,IAAIV,GAAG,CAACrB,8BAAJ,GAAqC,GAAnD,EAAyDqB,GAAG,CAACzB,oBAA7D,CAAlV;AACA,SAAOiC,2BAAP;AACD,CAHD;;AAKA,IAAMG,OAAO,GAAG,SAAVA,OAAU,CAACX,GAAD,EAAMY,GAAN,EAAc;AAC5B;AACA,MAAMC,0BAA0B,GAAGJ,IAAI,CAACd,GAAL,CAAS,CAAEiB,GAAG,GAAGZ,GAAG,CAACrB,8BAAV,GAA2C,GAA5C,GAAmDqB,GAAG,CAACxB,gBAAxD,KAA6EwB,GAAG,CAACxB,gBAAJ,GAAwBwB,GAAG,CAACvB,iBAAJ,GAAwBuB,GAAG,CAACrB,8BAA5B,GAA6D,GAAlK,CAAT,IAAoL8B,IAAI,CAACd,GAAL,CAAS,IAAIK,GAAG,CAACrB,8BAAJ,GAAqC,GAAlD,CAAvN;AAEA,SAAOkC,0BAAP;AACD,CALD,C,CAOA;;;AACA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD,EAAQC,MAAR,EAAgBC,MAAhB,EAA2B;AACjD;AACA,MAAIC,KAAK,GAAGC,EAAE,CAACC,QAAH,CAAY;AACtBC,IAAAA,MAAM,EAAEC,EAAE,CAACC,MAAH,CAAU,mBAAV,CADc;AAEtBC,IAAAA,IAAI,EAAE;AACJC,MAAAA,OAAO,EAAE,CACP,CAAC,SAAD,EAAYT,MAAZ,CADO,EAEP,CAAC,YAAD,EAAeD,KAAK,GAAGC,MAAvB,CAFO,CADL;AAKJU,MAAAA,KAAK,EAAE,IALH;AAMJC,MAAAA,IAAI,EAAE,OANF;AAOJ;AACA;AACA;AACAC,MAAAA,MAAM,EAAE;AACNC,QAAAA,OAAO,EAAE,SADH;AAENC,QAAAA,UAAU,EAAE;AAFN;AAVJ,KAFgB;AAiBtBC,IAAAA,KAAK,EAAE;AACLC,MAAAA,KAAK,EAAE,UADF;AAELC,MAAAA,KAAK,EAAE;AACLC,QAAAA,IAAI,EAAE;AADD,OAFF;AAKLC,MAAAA,KAAK,EAAE;AALF,KAjBe;AAwBtBC,IAAAA,MAAM,EAAE;AACNC,MAAAA,IAAI,EAAE;AADA;AAxBc,GAAZ,CAAZ;;AA6BA,MAAI,CAAC5B,IAAI,CAAC6B,KAAL,CAAWrB,MAAM,GAAG,GAApB,CAAD,IAA6B,CAACsB,QAAQ,CAACtB,MAAD,CAA1C,EAAoD;AAClDK,IAAAA,EAAE,CAACC,MAAH,CAAU,sBAAV,EACGiB,KADH,CACS,mBADT,EAC8B,iBAD9B,EAEGA,KAFH,CAES,WAFT,EAEsB,MAFtB,EAGGC,IAHH,CAGQ,OAHR,EAGiB,YAHjB,EAIE;AAJF,KAKGC,MALH,CAKU,OALV,EAMGD,IANH,CAMQ,IANR,EAMc,EANd,EAOGA,IAPH,CAOQ,GAPR,EAOa,CAPb,EAQGA,IARH,CAQQ,WARR,EAQqB,EARrB,EASGE,IATH,CASQ,MATR;AAUD,GAXD,MAWO;AACLrB,IAAAA,EAAE,CAACC,MAAH,CAAU,sBAAV,EACGiB,KADH,CACS,mBADT,EAC8B,iBAD9B,EAEGA,KAFH,CAES,WAFT,EAEsB,MAFtB,EAGGC,IAHH,CAGQ,OAHR,EAGiB,YAHjB,EAIGC,MAJH,CAIU,OAJV,EAKGD,IALH,CAKQ,IALR,EAKc,EALd,EAMGA,IANH,CAMQ,GANR,EAMa,CANb,EAOGA,IAPH,CAOQ,WAPR,EAOqB,EAPrB,EAQGE,IARH,WAQWlC,IAAI,CAAC6B,KAAL,CAAWrB,MAAM,GAAG,GAApB,CARX;AASD;;AAEDK,EAAAA,EAAE,CAACC,MAAH,CAAU,iBAAV,EACGkB,IADH,CACQ,OADR,EACiB,YADjB;AAGD,CAzDD,C,CA4DA;AAIA;;;AAIA,IAAMG,YAAY,GAAG,SAAfA,YAAe,CAACpB,IAAD,EAAU;AAC7BqB,EAAAA,KAAK,CACFC,IADH,CACQ,gCADR,EAC0CtB,IAD1C,EAEGuB,IAFH,CAEQ,UAACC,GAAD,EAAS;AACbtD,IAAAA,OAAO,CAACC,GAAR,CAAYqD,GAAG,CAACxB,IAAhB;AACAyB,IAAAA,KAAK,CAAC,MAAD,CAAL;AACAC,IAAAA,UAAU,CAAC,YAAM;AACfC,MAAAA,QAAQ,CAACC,IAAT,GAAgB,cAAhB;AACD,KAFS,EAEP,GAFO,CAAV;AAGD,GARH,WASS,UAACC,GAAD,EAAS;AACd3D,IAAAA,OAAO,CAAC4D,KAAR,CAAcD,GAAd;AACD,GAXH;AAYD,CAbD,C,CAeA;AACA;;;AACA,IAAME,SAAS,GAAG,SAAZA,SAAY,CAAC/B,IAAD,EAAU;AAC1B;AACAqB,EAAAA,KAAK,CACFC,IADH,CACQ,6BADR,EACuCtB,IADvC,EAEGuB,IAFH,CAEQ,UAACC,GAAD,EAAS;AACbQ,IAAAA,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAoCT,GAAG,CAACxB,IAAJ,CAASkC,WAA7C;AACAF,IAAAA,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA+BT,GAAG,CAACxB,IAAJ,CAASmC,IAAT,CAAcC,EAA7C;AACAX,IAAAA,KAAK,CAAC,MAAD,CAAL;AACAC,IAAAA,UAAU,CAAC,YAAM;AACfC,MAAAA,QAAQ,CAACC,IAAT,GAAgB,iBAAhB;AACD,KAFS,EAEP,GAFO,CAAV;AAGD,GATH,WAUS,UAACC,GAAD,EAAS;AACd3D,IAAAA,OAAO,CAAC4D,KAAR,CAAcD,GAAd;AACAJ,IAAAA,KAAK,CAAC,gBAAD,CAAL;AACD,GAbH;AAcD,CAhBD,C,CAkBA;;;AACA,IAAMY,UAAU,GAAG,SAAbA,UAAa,CAACrC,IAAD,EAAOsC,UAAP,EAAsB;AACvC,MAAMC,MAAM,GAAGP,YAAY,CAACQ,OAAb,CAAqB,QAArB,CAAf;AACA,MAAMC,WAAW,GAAG;AAClBC,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,mBAAYX,YAAY,CAACQ,OAAb,CAAqB,aAArB,CAAZ;AADN;AADS,GAApB,CAFuC,CAOvC;;AACA,MAAID,MAAJ,EAAY;AACVlB,IAAAA,KAAK,CACFuB,GADH,2CAC0CL,MAD1C,GACoDE,WADpD,EAEGlB,IAFH,CAEQ,UAACC,GAAD,EAAS;AACb,UAAIA,GAAG,CAACqB,MAAJ,KAAe,GAAnB,EAAwB;AACtB3E,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACAmE,QAAAA,UAAU,CAACd,GAAD,CAAV,CAFsB,CAGtB;AACD;AAEF,KATH,WAUS,UAACK,GAAD,EAAS;AAAA;;AACd,UAAI,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,6BAAAA,GAAG,CAAEiB,QAAL,gEAAeD,MAAf,MAA0B,GAA9B,EAAmC;AACjC3E,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACA6D,QAAAA,YAAY,CAACe,UAAb,CAAwB,QAAxB;AACAf,QAAAA,YAAY,CAACe,UAAb,CAAwB,aAAxB;AACD;;AACDT,MAAAA,UAAU,CAACT,GAAG,CAACiB,QAAL,CAAV,CANc,CAOd;AACD,KAlBH;AAmBD,GApBD,MAoBO;AACLR,IAAAA,UAAU;AACX;AACF,CA/BD,C,CAgCA;;;AACA,IAAMU,aAAa,GAAG,SAAhBA,aAAgB,CAACH,MAAD,EAASI,OAAT,EAAkBC,QAAlB,EAA+B;AACnDhF,EAAAA,OAAO,CAACC,GAAR,CAAY0E,MAAZ,EAAoBI,OAApB,EAA6BC,QAA7B;;AACA,MAAIL,MAAM,KAAK,GAAX,IAAkBI,OAAtB,EAA+B;AAC7B;AACA3J,IAAAA,eAAe,CAAC6J,SAAhB,kEAC8CD,QAD9C;AAOD,GATD,MASO,IAAIL,MAAM,KAAK,GAAf,EAAoB;AACzB;AACAvJ,IAAAA,eAAe,CAAC6J,SAAhB,kEAC8CD,QAD9C;AAMD,GARM,MAQA,IAAIL,MAAM,KAAK,GAAf,EAAoB;AACzB3E,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACD;AACF,CAtBD,C,CAwBA;;;AACA,IAAMiF,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACP,MAAD,EAASQ,OAAT,EAAqB;AAC5C,MAAMd,MAAM,GAAGP,YAAY,CAACQ,OAAb,CAAqB,QAArB,CAAf;;AACA,MAAIK,MAAM,KAAK,GAAf,EAAoB;AAClB3E,IAAAA,OAAO,CAACC,GAAR,CAAYkF,OAAZ;AACA5J,IAAAA,UAAU,CAAC0J,SAAX,GAAuB,EAAvB;;AACA,QAAIE,OAAJ,EAAa;AACX5J,MAAAA,UAAU,CAACuH,KAAX,CAAiBsC,UAAjB,mBAAsCD,OAAtC;AACD,KAFD,MAEO;AACL5J,MAAAA,UAAU,CAACuH,KAAX,CAAiBsC,UAAjB;AACD;;AACD7J,IAAAA,UAAU,CAAC8J,SAAX,CAAqBC,GAArB,CAAyB,gBAAzB;AACD,GATD,MASO;AACL/J,IAAAA,UAAU,CAAC0J,SAAX;AACD;AACF,CAdD;;AAgBA,IAAMM,iBAAiB,GAAG,SAApBA,iBAAoB,CAACzD,IAAD,EAAOsC,UAAP,EAAsB;AAC9C,MAAMC,MAAM,GAAGP,YAAY,CAACQ,OAAb,CAAqB,QAArB,CAAf;AACA,MAAMC,WAAW,GAAG;AAClBE,IAAAA,aAAa,kBAAWX,YAAY,CAACQ,OAAb,CAAqB,aAArB,CAAX;AADK,GAApB;AAGAtE,EAAAA,OAAO,CAACC,GAAR,CAAYoE,MAAZ,EAAoBE,WAApB;AAED,CAPD,C,CASA;;;AACA,IAAMiB,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACnE,KAAD,EAAQC,MAAR,EAAgBC,MAAhB,EAA2B;AACrD,MAAIC,KAAK,GAAGC,EAAE,CAACC,QAAH,CAAY;AACtBC,IAAAA,MAAM,EAAEC,EAAE,CAACC,MAAH,CAAU,kBAAV,CADc;AAEtBC,IAAAA,IAAI,EAAE;AACJC,MAAAA,OAAO,EAAE,CACP,CAAC,SAAD,EAAYT,MAAZ,CADO,EAEP,CAAC,YAAD,EAAeD,KAAK,GAAGC,MAAvB,CAFO,CADL;AAKJU,MAAAA,KAAK,EAAE,IALH;AAMJC,MAAAA,IAAI,EAAE,OANF;AAOJ;AACA;AACA;AACAC,MAAAA,MAAM,EAAE;AACNC,QAAAA,OAAO,EAAE,SADH;AAENC,QAAAA,UAAU,EAAE;AAFN;AAVJ,KAFgB;AAiBtBC,IAAAA,KAAK,EAAE;AACLC,MAAAA,KAAK,EAAE,UADF;AAELC,MAAAA,KAAK,EAAE;AACLC,QAAAA,IAAI,EAAE;AADD,OAFF;AAKLC,MAAAA,KAAK,EAAE;AALF,KAjBe;AAwBtBC,IAAAA,MAAM,EAAE;AACNC,MAAAA,IAAI,EAAE;AADA;AAxBc,GAAZ,CAAZ;;AA6BA,MAAI,CAAC5B,IAAI,CAAC6B,KAAL,CAAWrB,MAAM,GAAG,GAApB,CAAD,IAA6B,CAACsB,QAAQ,CAACtB,MAAD,CAA1C,EAAoD;AAClDK,IAAAA,EAAE,CAACC,MAAH,CAAU,sBAAV,EACGiB,KADH,CACS,mBADT,EAC8B,iBAD9B,EAEGA,KAFH,CAES,WAFT,EAEsB,MAFtB,EAGGE,MAHH,CAGU,OAHV,EAIGD,IAJH,CAIQ,IAJR,EAIc,EAJd,EAKGA,IALH,CAKQ,GALR,EAKa,CALb,EAMGA,IANH,CAMQ,WANR,EAMqB,EANrB,EAOGE,IAPH,CAOQ,MAPR;AAQD,GATD,MASO;AACLrB,IAAAA,EAAE,CAACC,MAAH,CAAU,sBAAV,EACGiB,KADH,CACS,mBADT,EAC8B,iBAD9B,EAEGA,KAFH,CAES,WAFT,EAEsB,MAFtB,EAGGE,MAHH,CAGU,OAHV,EAIGD,IAJH,CAIQ,IAJR,EAIc,EAJd,EAKGA,IALH,CAKQ,GALR,EAKa,CALb,EAMGA,IANH,CAMQ,WANR,EAMqB,EANrB,EAOGE,IAPH,WAOWlC,IAAI,CAAC6B,KAAL,CAAWrB,MAAM,GAAG,GAApB,CAPX;AAQD;AAEF,CAlDD,C,CAoDA;;;AAEA,IAAMkE,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACN,OAAD,EAAUH,QAAV,EAAoBU,QAApB,EAAiC;AAC9DzJ,EAAAA,YAAY,CAAC0J,WAAb,GAA2BX,QAA3B;AACA9I,EAAAA,YAAY,CAACyJ,WAAb,GAA2BD,QAA3B;;AACA,MAAIP,OAAJ,EAAa;AACXnJ,IAAAA,WAAW,CAAC8G,KAAZ,CAAkBsC,UAAlB,mBAAuCD,OAAvC;AACD,GAFD,MAEO;AACLnJ,IAAAA,WAAW,CAAC8G,KAAZ,CAAkBsC,UAAlB;AACD;AACF,CARD;;AAUA,IAAMQ,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvB9B,EAAAA,YAAY,CAACe,UAAb,CAAwB,QAAxB;AACAf,EAAAA,YAAY,CAACe,UAAb,CAAwB,aAAxB;AACAtB,EAAAA,KAAK,CAAC,MAAD,CAAL;AACAE,EAAAA,QAAQ,CAACC,IAAT,GAAgB,aAAhB;AACD,CALD,C,CAQA;AAEA;;;AAEA,IAAMmC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACV,OAAD,EAAa;AACvCnF,EAAAA,OAAO,CAACC,GAAR,CAAYkF,OAAZ;;AACA,MAAIA,OAAJ,EAAa;AACXhJ,IAAAA,gBAAgB,CAAC2G,KAAjB,CAAuBsC,UAAvB,mBAA4CD,OAA5C;AACD,GAFD,MAEO;AACLhJ,IAAAA,gBAAgB,CAAC2G,KAAjB,CAAuBsC,UAAvB;AACD;AACF,CAPD;;AASA,IAAMU,cAAc,GAAG,SAAjBA,cAAiB,CAAChE,IAAD,EAAOsC,UAAP,EAAsB;AAC3C,MAAMC,MAAM,GAAGP,YAAY,CAACQ,OAAb,CAAqB,QAArB,CAAf;AACA,MAAMC,WAAW,GAAG;AAClBE,IAAAA,aAAa,kBAAWX,YAAY,CAACQ,OAAb,CAAqB,aAArB,CAAX;AADK,GAApB;AAGAnB,EAAAA,KAAK,CACFuB,GADH,gCACsCH,WADtC,EAEGlB,IAFH,CAEQ,UAACC,GAAD,EAAS;AACb,QAAIA,GAAG,CAACqB,MAAJ,KAAe,GAAnB,EAAwB;AACtB;AACAP,MAAAA,UAAU,CAACd,GAAD,CAAV;AACD;AACF,GAPH,WAQS,UAACK,GAAD,EAAS;AACd3D,IAAAA,OAAO,CAACC,GAAR,CAAY0D,GAAZ;AACAS,IAAAA,UAAU;AACX,GAXH;AAYD,CAjBD;;AAmBA,IAAM2B,cAAc,GAAG,SAAjBA,cAAiB,CAACjE,IAAD,EAAOsC,UAAP,EAAsB;AAC3C,MAAMC,MAAM,GAAGP,YAAY,CAACQ,OAAb,CAAqB,QAArB,CAAf;AACA,MAAMC,WAAW,GAAG;AAClBE,IAAAA,aAAa,kBAAWX,YAAY,CAACQ,OAAb,CAAqB,aAArB,CAAX;AADK,GAApB;AAGAnB,EAAAA,KAAK,CACFuB,GADH,CACO,0CADP,EACmDH,WADnD,EAEGlB,IAFH,CAEQ,UAACC,GAAD,EAAS;AACb,QAAIA,GAAG,CAACqB,MAAJ,KAAe,GAAnB,EAAwB;AACtB;AACAP,MAAAA,UAAU,CAACd,GAAD,CAAV;AACD;AACF,GAPH,WAQS,UAACK,GAAD,EAAS;AACd3D,IAAAA,OAAO,CAACC,GAAR,CAAY0D,GAAZ;AACAS,IAAAA,UAAU;AACX,GAXH;AAYD,CAjBD,C,CAoBA;AAGA;AAMA;AAIA;;;AACA,IAAIvI,OAAJ,EAAa;AACXA,EAAAA,OAAO,CAACmK,gBAAR,CAAyB,OAAzB,EAAkC,UAACC,CAAD,EAAO;AACvC,QAAMC,WAAW,GAAGhH,WAAW,CAACtD,QAAD,CAA/B,CADuC,CAEvC;;AACA,QAAMwD,QAAQ,GAAGiB,cAAc,CAAC6F,WAAD,CAA/B;AACAlG,IAAAA,OAAO,CAACC,GAAR,CAAYb,QAAZ,EAJuC,CAKvC;;AACA,QAAM+G,KAAK,GAAGxG,cAAc,CAACP,QAAD,EAAWlB,eAAX,CAA5B,CANuC,CAOvC;;AACA,QAAM4C,2BAA2B,GAAGC,IAAI,CAAC6B,KAAL,CAAW/B,SAAS,CAACzB,QAAD,CAAT,GAAsB,GAAjC,IAAwC,GAA5E;AACA,QAAMgH,yBAAyB,GAAGnF,OAAO,CAAC7B,QAAD,EAAW0B,2BAAX,CAAzC;AACAd,IAAAA,OAAO,CAACC,GAAR,CAAYmG,yBAAZ,EAVuC,CAWvC;;AACAhF,IAAAA,eAAe,CAACN,2BAAD,EAA8B1B,QAAQ,CAACL,iBAAvC,EAA0DqH,yBAA1D,CAAf;AACAtK,IAAAA,KAAK,CAAC6J,WAAN,aAAuB7E,2BAAvB;AACD,GAdD;AAeD,C,CAED;;;AACA,IAAItF,QAAJ,EAAc;AACZA,EAAAA,QAAQ,CAACwK,gBAAT,CAA0B,OAA1B,EAAmC,UAACC,CAAD,EAAO;AACxC,QAAMnE,IAAI,GAAG5C,WAAW,CAACzD,YAAD,CAAxB;AACA,WAAOqG,IAAI,CAAC/D,aAAZ;AACAiC,IAAAA,OAAO,CAACC,GAAR,CAAY6B,IAAZ;AACA,QAAMqE,KAAK,GAAGxG,cAAc,CAAClE,YAAD,EAAeoC,mBAAf,CAA5B;AACAmC,IAAAA,OAAO,CAACC,GAAR,CAAYkG,KAAZ;;AACA,QAAIA,KAAJ,EAAW;AACTrE,MAAAA,IAAI,CAAC,SAAD,CAAJ,GAAkB,KAAlB;AACAoB,MAAAA,YAAY,CAACpB,IAAD,CAAZ,CAFS,CAGT;AACD,KAJD,MAIO;AACL9B,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACD;AAEF,GAdD;AAeD,C,CAED;;;AACA,IAAIvE,KAAJ,EAAW;AACTA,EAAAA,KAAK,CAACsK,gBAAN,CAAuB,OAAvB,EAAgC,UAACC,CAAD,EAAO;AACrC,QAAMnE,IAAI,GAAG5C,WAAW,CAACvD,SAAD,CAAxB,CADqC,CAErC;;AACA,QAAMwK,KAAK,GAAGxG,cAAc,CAAChE,SAAD,EAAYwB,gBAAZ,CAA5B;AACA6C,IAAAA,OAAO,CAACC,GAAR,CAAYkG,KAAZ;;AACA,QAAIA,KAAJ,EAAW;AACTtC,MAAAA,SAAS,CAAC/B,IAAD,CAAT;AACD,KAFD,MAEO;AACL9B,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACD;AACF,GAVD;AAWD;;AAGD;AAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAU,C,CAGV;AAEA;;AACAoG,MAAM,CAACC,MAAP,GAAgB,YAAM;AACpBnC,EAAAA,UAAU,CAAC,EAAD,EAAK,UAACb,GAAD,EAAS;AACtB;AACA,QAAIA,GAAJ,EAAS;AAAA;;AACP,UAAI,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,YAAAA,GAAG,CAAEqB,MAAL,MAAgB,GAApB,EAAyB;AACvB3E,QAAAA,OAAO,CAACC,GAAR,CAAYqD,GAAZ,aAAYA,GAAZ,uBAAYA,GAAG,CAAEqB,MAAjB;AACAG,QAAAA,aAAa,CAAC,GAAD,EAAM,KAAN,CAAb;AACD,OAHD,MAGO,IAAI,CAAAxB,GAAG,SAAH,IAAAA,GAAG,WAAH,YAAAA,GAAG,CAAEqB,MAAL,MAAgB,GAAhB,IAAuBrB,GAAvB,aAAuBA,GAAvB,4BAAuBA,GAAG,CAAExB,IAA5B,sCAAuB,UAAWiD,OAAtC,EAA+C;AACpD,YAAItB,QAAQ,CAAC8C,QAAT,KAAsB,uBAAtB,IAAiD9C,QAAQ,CAAC8C,QAAT,KAAsB,uBAA3E,EAAoG;AAClGV,UAAAA,mBAAmB,CAACvC,GAAG,CAACxB,IAAJ,CAASqD,OAAV,CAAnB;AACD,SAFD,MAEO;AACLD,UAAAA,gBAAgB,CAAC,GAAD,EAAM5B,GAAG,CAACxB,IAAJ,CAASqD,OAAf,CAAhB;AACD;;AACDL,QAAAA,aAAa,CAAC,GAAD,EAAM,IAAN,EAAYxB,GAAG,CAACxB,IAAJ,CAAShE,IAArB,CAAb;AACA,YAAM0I,SAAS,GAAGnL,QAAQ,CAACC,aAAT,CAAuB,oBAAvB,CAAlB;;AACA,YAAIkL,SAAJ,EAAe;AACbA,UAAAA,SAAS,CAACR,gBAAV,CAA2B,OAA3B,EAAoC,UAACC,CAAD,EAAO;AACzCL,YAAAA,UAAU;AACX,WAFD;AAGD;AAEF,OAdM,MAcA,IAAI,CAAAtC,GAAG,SAAH,IAAAA,GAAG,WAAH,YAAAA,GAAG,CAAEqB,MAAL,MAAgB,GAApB,EAAyB;AAC9BG,QAAAA,aAAa,CAAC,GAAD,EAAM,KAAN,EAAaxB,GAAG,CAACxB,IAAJ,CAAShE,IAAtB,CAAb;AACAoH,QAAAA,gBAAgB,CAAC,GAAD,EAAM5B,GAAG,CAACxB,IAAJ,CAASqD,OAAf,CAAhB;;AACA,YAAMqB,UAAS,GAAGnL,QAAQ,CAACC,aAAT,CAAuB,oBAAvB,CAAlB;;AACA,YAAIkL,UAAJ,EAAe;AACbA,UAAAA,UAAS,CAACR,gBAAV,CAA2B,OAA3B,EAAoC,UAACC,CAAD,EAAO;AACzCL,YAAAA,UAAU;AACX,WAFD;AAGD;AACF;AACF,KA5BD,MA4BO;AACL5F,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;;AACA,UAAI1E,UAAJ,EAAgB;AACd2J,QAAAA,gBAAgB,CAAC,EAAD,EAAK,KAAL,CAAhB;AACD;AAEF;AAEF,GAtCS,CAAV;AAuCD,CAxCD,C,CA6CA;;;AACA,IAAIzB,QAAQ,CAAC8C,QAAT,KAAsB,gBAA1B,EAA4C;AAC1CpC,EAAAA,UAAU,CAAC,EAAD,EAAK,UAACb,GAAD,EAAS;AACtB,QAAIA,GAAJ,EAAS;AACP,UAAIA,GAAG,CAACqB,MAAJ,KAAe,GAAnB,EAAwB;AACtBnB,QAAAA,UAAU,CAAC,YAAM;AACfC,UAAAA,QAAQ,CAACC,IAAT,GAAgB,cAAhB;AACD,SAFS,EAEP,GAFO,CAAV;AAGAH,QAAAA,KAAK,CAAC,OAAD,CAAL;AACD;AACF,KAPD,MAOO;AACLC,MAAAA,UAAU,CAAC,YAAM;AACfC,QAAAA,QAAQ,CAACC,IAAT,GAAgB,cAAhB;AACD,OAFS,EAEP,GAFO,CAAV;AAGAH,MAAAA,KAAK,CAAC,OAAD,CAAL;AACD;;AACDiC,IAAAA,mBAAmB,CAAC,EAAD,EAAK,EAAL,EAAS,GAAT,CAAnB;AACAC,IAAAA,sBAAsB,CAACnC,GAAG,CAACxB,IAAJ,CAASqD,OAAV,EAAmB7B,GAAG,CAACxB,IAAJ,CAAShE,IAA5B,EAAkCwF,GAAG,CAACxB,IAAJ,CAAS1E,KAA3C,CAAtB;AACAmI,IAAAA,iBAAiB;AAClB,GAjBS,CAAV;AAkBD;;AACDvF,OAAO,CAACC,GAAR,CAAYwD,QAAQ,CAAC8C,QAArB;;AAGA,IAAI9C,QAAQ,CAAC8C,QAAT,KAAsB,uBAA1B,EAAmD;AACjDpC,EAAAA,UAAU,CAAC,EAAD,EAAK,UAACb,GAAD,EAAS;AACtB;AACA,QAAIA,GAAJ,EAAS;AACP,UAAIA,GAAG,CAACqB,MAAJ,KAAe,GAAnB,EAAwB;AACtBlB,QAAAA,QAAQ,CAACC,IAAT,GAAgB,cAAhB;AACAH,QAAAA,KAAK,CAAC,OAAD,CAAL;AACD;AACF,KALD,MAKO;AACLE,MAAAA,QAAQ,CAACC,IAAT,GAAgB,cAAhB;AACAH,MAAAA,KAAK,CAAC,OAAD,CAAL;AACD,KAVqB,CAYtB;;AACD,GAbS,CAAV;AAcAuC,EAAAA,cAAc,CAAC,EAAD,EAAK,UAACxC,GAAD,EAAS;AAC1B,QAAMmD,QAAQ,GAAGnD,GAAG,CAACxB,IAAJ,CAASvC,MAAT,CAAgB,UAACC,GAAD,EAAMkH,GAAN,EAAc;AAC7ClH,MAAAA,GAAG,+EAEiBkH,GAAG,CAACxC,EAFrB,gCAGKwC,GAAG,CAAC5I,IAHT,gCAIK4I,GAAG,CAACtJ,KAJT,gCAKKsJ,GAAG,CAAC3B,OALT,+JAO+G2B,GAAG,CAACxC,EAPnH,uJAUsCwC,GAAG,CAACxC,EAV1C,0rBAoBwCwC,GAAG,CAACxC,EApB5C,iGAqBmDwC,GAAG,CAACxC,EArBvD,oCAqB+EwC,GAAG,CAACxC,EArBnF,8JAwB0CwC,GAAG,CAACxC,EAxB9C,qGAyBqDwC,GAAG,CAACxC,EAzBzD,sCAyBmFwC,GAAG,CAAC5I,IAzBvF,sJA4B2C4I,GAAG,CAACxC,EA5B/C,uGA6BsDwC,GAAG,CAACxC,EA7B1D,uCA6BqFwC,GAAG,CAACtJ,KA7BzF,6JAgCyCsJ,GAAG,CAACxC,EAhC7C,uGAiCoDwC,GAAG,CAACxC,EAjCxD,yCAiCqFwC,GAAG,CAACvB,OAjCzF,oJAoCyCuB,GAAG,CAACxC,EApC7C,uGAqCoDwC,GAAG,CAACxC,EArCxD,yCAqCqFwC,GAAG,CAAC3B,OArCzF,oWAAH;AAgDA,aAAOvF,GAAP;AACD,KAlDgB,EAkDd,EAlDc,CAAjB;AAmDApD,IAAAA,WAAW,CAAC6I,SAAZ,GAAwBwB,QAAxB;AACD,GArDa,CAAd;AAuDD;;AAED,IAAIhD,QAAQ,CAAC8C,QAAT,KAAsB,uBAA1B,EAAmD;AACjDpC,EAAAA,UAAU,CAAC,EAAD,EAAK,UAACb,GAAD,EAAS;AACtB,QAAIA,GAAJ,EAAS;AACP,UAAIA,GAAG,CAACqB,MAAJ,KAAe,GAAnB,EAAwB;AACtBnB,QAAAA,UAAU,CAAC,YAAM;AACfC,UAAAA,QAAQ,CAACC,IAAT,GAAgB,cAAhB;AACD,SAFS,EAEP,GAFO,CAAV;AAGAH,QAAAA,KAAK,CAAC,OAAD,CAAL;AACD;AACF,KAPD,MAOO;AACLC,MAAAA,UAAU,CAAC,YAAM;AACfC,QAAAA,QAAQ,CAACC,IAAT,GAAgB,cAAhB;AACD,OAFS,EAEP,GAFO,CAAV;AAGAH,MAAAA,KAAK,CAAC,OAAD,CAAL;AACD;AAEF,GAfS,CAAV;AAgBAwC,EAAAA,cAAc,CAAC,EAAD,EAAK,UAACzC,GAAD,EAAS;AAC1BtD,IAAAA,OAAO,CAACC,GAAR,CAAYqD,GAAZ;AACA,QAAMqD,QAAQ,GAAGrD,GAAG,CAACxB,IAAJ,CAASvC,MAAT,CAAgB,UAACC,GAAD,EAAMkH,GAAN,EAAc;AAC7ClH,MAAAA,GAAG,+EAEiBkH,GAAG,CAACxC,EAFrB,gCAGKwC,GAAG,CAACzC,IAAJ,CAASnG,IAHd,gCAIK4I,GAAG,CAACpE,KAJT,+JAM+GoE,GAAG,CAACxC,EANnH,gMAOuGwC,GAAG,CAACxC,EAP3G,uIAUiCwC,GAAG,CAACxC,EAVrC,89BA2BsCwC,GAAG,CAACxC,EA3B1C,yrBAqCwCwC,GAAG,CAACxC,EArC5C,iGAsCmDwC,GAAG,CAACxC,EAtCvD,oCAsC+EwC,GAAG,CAACxC,EAtCnF,4JAyCwCwC,GAAG,CAACxC,EAzC5C,qGA0CmDwC,GAAG,CAACxC,EA1CvD,wCA0CmFwC,GAAG,CAACrC,MA1CvF,8JA6C0CqC,GAAG,CAACxC,EA7C9C,yGA8CqDwC,GAAG,CAACxC,EA9CzD,0CA8CuFwC,GAAG,CAACzC,IAAJ,CAASnG,IA9ChG,2JAiDuC4I,GAAG,CAACxC,EAjD3C,mGAkDkDwC,GAAG,CAACxC,EAlDtD,uCAkDiFwC,GAAG,CAACpE,KAlDrF,oJAqDyCoE,GAAG,CAACxC,EArD7C,sIAsDiFwC,GAAG,CAACxC,EAtDrF,iCAsD2GwC,GAAG,CAACE,OAtD/G,6XAAH;AAmEA,aAAOpH,GAAP;AACD,KArEgB,EAqEd,EArEc,CAAjB;AAuEAnD,IAAAA,WAAW,CAAC4I,SAAZ,GAAwB0B,QAAxB;AACD,GA1Ea,CAAd;AA2ED,C,CAGD;;;AACAvF,eAAe,CAAC,EAAD,EAAK,EAAL,EAAS,GAAT,CAAf","file":"all.js","sourcesContent":["\n//--------DOM元素綁定 start--------\nconst navDropdowmMenu = document.querySelector(\"[data-nav-dropdowm-menu]\");\nconst navUserImg = document.querySelector(\"[data-nav-user-img]\");\n\nconst register = document.querySelector(\"[data-register]\");\nconst registerForm = document.querySelector(\"[data-register-form]\");\n\nconst login = document.querySelector(\"[data-login]\");\nconst loginForm = document.querySelector(\"[data-login-form]\");\n\nconst formList = document.querySelector(\"[data-form-list]\");\nconst clacBtn = document.querySelector(\"[data-btn-clac]\");\nconst fINum = document.querySelector(\"[data-FINum]\");\n\nconst userPage = document.querySelector(\"[data-user-page]\");\nconst userpageImg = document.querySelector(\"[data-userpage-user-img]\");\nconst userpageName = document.querySelector(\"[data-userpage-user-name]\");\nconst userpageMail = document.querySelector(\"[data-userpage-user-mail]\");\n\nconst backstageUserImg = document.querySelector(\"[data-backstage-userImg]\");\nconst allUserData = document.querySelector(\"[data-backstage-users]\");\nconst allPostData = document.querySelector(\"[data-backstage-posts]\");\n\nconst userpageFINum = document.querySelector(\"[data-userpage-FINum]\");\nconst fINumAnnualExpenses = document.querySelector(\"[data-FINum-annual-expenses]\");\nconst fINumAnnualExpensesForm = document.querySelector(\"[data-FINum-annual-expenses-form]\");\nconst fINumOnetimeExpenses = document.querySelector(\"[data-FINum-onetime-expenses]\");\nconst fINumOnetimeExpensesForm = document.querySelector(\"[data-FINum-onetime-expenses-form]\");\nconst fINumOnetimeExpenses1 = document.querySelector(\"[data-FINum-onetime-expenses-1]\");\nconst fINumOnetimeExpenses2 = document.querySelector(\"[data-FINum-onetime-expenses-2]\");\nconst fINumOnetimeExpenses3 = document.querySelector(\"[data-FINum-onetime-expenses-3]\");\nconst fINumOnetimeExpenses4 = document.querySelector(\"[data-FINum-onetime-expenses-4]\");\nconst fINumWithdrawalRate = document.querySelector(\"[data-FINum-withdrawal-rate]\");\nconst fINumInvestReturn = document.querySelector(\"[data-FINum-invest-return]\");\n\n\n//--------DOM元素綁定 end--------\n\n\n\n\n\n\n//--------參數宣告 start--------\nconst freeNum = 0;\nconst howFarToFree = 0;\nconst loginConstraints = {\n  email: {\n    presence: {\n      message: \"^請輸入email\"\n    },\n    email: {\n      message: \"^請正確填寫email格式\"\n    }\n  },\n  password: {\n    presence: {\n      message: \"^請輸入密碼\",\n    },\n    length: {\n      minimum: 5,\n      maximum: 12,\n      message: \"^密碼需為5~12位英文或數字\"\n    },\n    format: {\n      pattern: \"[a-z0-9]+\",\n      message: \"^密碼需為5~12位英文或數字\"\n    }\n  }\n};\nconst registerConstraints = {\n  name: {\n    presence: {\n      message: \"^請輸入使用者暱稱\"\n    },\n    length: {\n      minimum: 1,\n      maximum: 10,\n      message: \"^暱稱為1~10個中英數字\"\n    },\n  },\n  email: {\n    presence: {\n      message: \"^請輸入email\"\n    },\n    email: {\n      message: \"^請正確填寫email格式\"\n    }\n  },\n  password: {\n    presence: {\n      message: \"^請輸入密碼\",\n    },\n    length: {\n      minimum: 5,\n      maximum: 12,\n      message: \"^密碼需為5~12位英文或數字\"\n    },\n    format: {\n      pattern: \"[a-z0-9]+\",\n      message: \"^密碼需為5~12位英文或數字\"\n    }\n  },\n  passwordCheck: {\n    equality: {\n      attribute: \"password\",\n      message: \"^輸入值與密碼不符，請重新輸入\",\n    }\n  }\n};\n\nconst clacConstraints = {\n  annualExpenses: {\n    numericality: {\n      notValid: \"^欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^輸入的數字需要大於等於零\"\n    }\n  },\n  oneTimeExpenses1: {\n    numericality: {\n      notValid: \"^欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^輸入的數字需要大於等於零\"\n    }\n  },\n  oneTimeExpensesTime1: {\n    numericality: {\n      notValid: \"^欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^輸入的數字需要大於等於零\"\n    }\n  },\n  oneTimeExpenses2: {\n    numericality: {\n      notValid: \"^欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^輸入的數字需要大於等於零\"\n    }\n  },\n  oneTimeExpensesTime2: {\n    numericality: {\n      notValid: \"^欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^輸入的數字需要大於等於零\"\n    }\n  },\n  oneTimeExpenses3: {\n    numericality: {\n      notValid: \"^欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^輸入的數字需要大於等於零\"\n    }\n  },\n  oneTimeExpensesTime3: {\n    numericality: {\n      notValid: \"^欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^輸入的數字需要大於等於零\"\n    }\n  },\n  annualInvestment: {\n    numericality: {\n      notValid: \"^欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^輸入的數字需要大於等於零\"\n    }\n  },\n  currentInvestment: {\n    numericality: {\n      notValid: \"^欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^輸入的數字需要大於等於零\"\n    }\n  },\n  targetWithdrawalRate: {\n    numericality: {\n      notValid: \"^欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^輸入的數字需要大於等於零\"\n    }\n  },\n  expectedInvestmentAnnualReturn: {\n    numericality: {\n      notValid: \"^欄位僅能輸入數字\",\n      greaterThanOrEqualTo: 0,\n      notGreaterThanOrEqualTo: \"^輸入的數字需要大於等於零\"\n    }\n  }\n}\n\n\n//--------參數宣告 end--------\n\n\n\n\n\n//--------函士宣告 start--------\n\n//-------- 共用函式 start--------\nconst getFormData = (dom) => {\n  const formData = new FormData(dom);\n  const formDataObj = [...formData].reduce((acc, [name, values]) => {\n    acc[name] = values.trim();\n    return acc\n  }, {});\n  return formDataObj;\n}\n\nconst userInputCheck = (dom, constraints) => {\n  let dataCheckBool = \"\";\n  const dataCheck = validate(dom, constraints);\n  console.log(dataCheck);\n  if (dataCheck) {\n    Object.values(dataCheck).forEach((i) => {\n      console.log(i);\n    })\n    dataCheckBool = false;\n  } else {\n    dataCheckBool = true;\n  }\n  return dataCheckBool;\n}\n\n//--------首頁-財富自由計算機 start--------\n\n//整理formData取得的資料\nconst getClacDataObj = (obj) => {\n  const DataObj = {\n    annualExpenses: obj[\"年支出\"],\n    oneTimeExpenses1: obj[\"大筆支出1\"],\n    oneTimeExpensesTime1: obj[\"幾年後支出1\"],\n    oneTimeExpenses2: obj[\"大筆支出2\"],\n    oneTimeExpensesTime2: obj[\"幾年後支出2\"],\n    oneTimeExpenses3: obj[\"大筆支出3\"],\n    oneTimeExpensesTime3: obj[\"幾年後支出3\"],\n    annualInvestment: obj[\"每年投資金額\"],\n    currentInvestment: obj[\"已投入金額\"],\n    targetWithdrawalRate: obj[\"預估每年提領率\"],\n    expectedInvestmentAnnualReturn: obj[\"預估平均年報酬\"]\n  }\n  const makeDataNoEmpty = Object.entries(DataObj).reduce((acc, [key, value]) => {\n    !value ? acc[key] = 0 : acc[key] = parseInt(value, 10);\n    return acc;\n  }, {})\n  return makeDataNoEmpty;\n}\n\n//計算財富自由數字\nconst clacFINum = (obj) => {\n  const financialIndependenceNumber = (obj.annualExpenses / (obj.targetWithdrawalRate / 100)) + (obj.oneTimeExpenses1 / Math.pow((1 + obj.expectedInvestmentAnnualReturn / 100), obj.oneTimeExpensesTime1)) + (obj.oneTimeExpenses2 / Math.pow((1 + obj.expectedInvestmentAnnualReturn / 100), obj.oneTimeExpensesTime2)) + (obj.oneTimeExpenses3 / Math.pow((1 + obj.expectedInvestmentAnnualReturn / 100), obj.oneTimeExpensesTime3));\n  return financialIndependenceNumber;\n}\n\nconst untilFI = (obj, num) => {\n  // Math.log( (財富自由數字*投資報酬率+預估每年可存入金額)/(預估每年可存入金額+已投入金額*投資報酬率)) / Math.log(1+投資報酬率)\n  const untilFinancialIndependence = Math.log(((num * obj.expectedInvestmentAnnualReturn / 100) + obj.annualInvestment) / (obj.annualInvestment + (obj.currentInvestment * obj.expectedInvestmentAnnualReturn / 100))) / Math.log(1 + obj.expectedInvestmentAnnualReturn / 100);\n\n  return untilFinancialIndependence;\n}\n\n//渲染圖表\nconst renderClacChart = (FINum, crrInv, FIDays) => {\n  // index-clac-chart\n  let chart = c3.generate({\n    bindto: d3.select(\".index-clac-chart\"),\n    data: {\n      columns: [\n        [\"財富自由達成率\", crrInv],\n        [\"距離財富自由目標還有\", FINum - crrInv]\n      ],\n      order: null,\n      type: \"donut\",\n      // onclick: function (d, i) { console.log(\"onclick\", d, i); },\n      // onmouseover: function (d, i) { console.log(\"onmouseover\", d, i); },\n      // onmouseout: function (d, i) { console.log(\"onmouseout\", d, i); },\n      colors: {\n        財富自由達成率: \"#03CBE6\",\n        距離財富自由目標還有: \"transparent\"\n      }\n    },\n    donut: {\n      title: \"距離財富自由還有\",\n      label: {\n        show: false\n      },\n      width: 20\n    },\n    legend: {\n      hide: \"距離財富自由目標還有\"\n    }\n  });\n\n  if (!Math.round(FIDays * 365) || !isFinite(FIDays)) {\n    d3.select(\".c3-chart-arcs-title\")\n      .style(\"dominant-baseline\", \"text-after-edge\")\n      .style(\"font-size\", \"20px\")\n      .attr(\"class\", \"fill-white\")\n      // .style(\"fill\",\"white\")\n      .insert(\"tspan\")\n      .attr(\"dy\", 50)\n      .attr(\"x\", 0)\n      .attr(\"font-size\", 40)\n      .text(\"？？？天\");\n  } else {\n    d3.select(\".c3-chart-arcs-title\")\n      .style(\"dominant-baseline\", \"text-after-edge\")\n      .style(\"font-size\", \"20px\")\n      .attr(\"class\", \"fill-white\")\n      .insert(\"tspan\")\n      .attr(\"dy\", 50)\n      .attr(\"x\", 0)\n      .attr(\"font-size\", 40)\n      .text(`${Math.round(FIDays * 365)}天`);\n  }\n\n  d3.select(\".c3-legend-item\")\n    .attr(\"class\", \"fill-white\")\n\n};\n\n\n//--------首頁-財富自由計算機 end--------\n\n\n\n//--------登入註冊功能 start--------\n\n\n\nconst userRegister = (data) => {\n  axios\n    .post(\"http://localhost:3000/register\", data)\n    .then((res) => {\n      console.log(res.data);\n      alert(\"註冊成功\");\n      setTimeout(() => {\n        location.href = \"./login.html\";\n      }, 500);\n    })\n    .catch((err) => {\n      console.error(err);\n    })\n}\n\n//登入並把accessToken跟userId放入localStorage\n//這裡的post還不需要帶token\nconst userLogin = (data) => {\n  // const header = {}\n  axios\n    .post(\"http://localhost:3000/login\", data)\n    .then((res) => {\n      localStorage.setItem(\"accessToken\", res.data.accessToken);\n      localStorage.setItem(\"userId\", res.data.user.id);\n      alert(\"登入成功\");\n      setTimeout(() => {\n        location.href = \"./userpage.html\";\n      }, 500);\n    })\n    .catch((err) => {\n      console.error(err);\n      alert(\"請確認帳號或密碼是否正確填寫\");\n    })\n}\n\n//登入確認，回傳fn(res)\nconst loginCheck = (data, callbackFn) => {\n  const userId = localStorage.getItem(\"userId\");\n  const userheaders = {\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n    }\n  }\n  // console.log(userId);\n  if (userId) {\n    axios\n      .get(`http://localhost:3000/600/users/${userId}`, userheaders)\n      .then((res) => {\n        if (res.status === 200) {\n          console.log(\"登入成功\");\n          callbackFn(res)\n          // navDropdowmMenu.innerHTML = `<li>${res.data.name}</li>`;\n        }\n\n      })\n      .catch((err) => {\n        if (err?.response?.status === 401) {\n          console.log(\"請重新登入\")\n          localStorage.removeItem(\"userId\");\n          localStorage.removeItem(\"accessToken\");\n        }\n        callbackFn(err.response);\n        // console.log(err.response);\n      })\n  } else {\n    callbackFn();\n  }\n}\n//不同身分渲染不同畫面\nconst renderUserNav = (status, isAdmin, userName) => {\n  console.log(status, isAdmin, userName)\n  if (status === 200 && isAdmin) {\n    // console.log(\"管理者\");\n    navDropdowmMenu.innerHTML = ` \n    <li><a class=\"dropdown-item text-center\">Hi~${userName}</a></li>\n    <hr class=\"m-1\">\n    <li><a class=\"dropdown-item text-center\" href=\"/userpage.html\">會員頁面</a></li>\n    <li><a class=\"dropdown-item text-center\" href=\"/backstage-users.html\">管理者後台</a></li>\n    <li><a class=\"dropdown-item text-center\" data-user-logout>登出</a></li>\n    `\n  } else if (status === 200) {\n    // console.log(\"一般會員\");\n    navDropdowmMenu.innerHTML = ` \n    <li><a class=\"dropdown-item text-center\">Hi~${userName}</a></li>\n    <hr class=\"m-1\">\n    <li><a class=\"dropdown-item text-center\" href=\"/userpage.html\">會員頁面</a></li>\n    <li><a class=\"dropdown-item text-center\" data-user-logout>登出</a></li>\n    `\n  } else if (status === 401) {\n    console.log(\"非會員\");\n  }\n}\n\n//不同使用者渲染不同頭像\nconst renderNavUserImg = (status, userImg) => {\n  const userId = localStorage.getItem(\"userId\");\n  if (status === 200) {\n    console.log(userImg);\n    navUserImg.innerHTML = \"\";\n    if (userImg) {\n      navUserImg.style.background = `url(\"${userImg}\") no-repeat center/cover`;\n    } else {\n      navUserImg.style.background = `url(\"https://images.unsplash.com/photo-1667925235667-627cf2759b2c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2071&q=80\") no-repeat center/cover`;\n    }\n    navUserImg.classList.add(\"rounded-circle\");\n  } else {\n    navUserImg.innerHTML = `<span class=\"usermenu-icon material-symbols-outlined text-primary align-middle\">account_circle</span>`;\n  }\n}\n\nconst getUserpageFIData = (data, callbackFn) => {\n  const userId = localStorage.getItem(\"userId\");\n  const userheaders = {\n    Authorization: `Barer ${localStorage.getItem(\"accessToken\")}`\n  }\n  console.log(userId, userheaders);\n\n}\n\n//依據使用者輸入資料渲染c3圖型\nconst renderUserClacChart = (FINum, crrInv, FIDays) => {\n  let chart = c3.generate({\n    bindto: d3.select(\".user-clac-chart\"),\n    data: {\n      columns: [\n        [\"財富自由達成率\", crrInv],\n        [\"距離財富自由目標還有\", FINum - crrInv]\n      ],\n      order: null,\n      type: \"donut\",\n      // onclick: function (d, i) { console.log(\"onclick\", d, i); },\n      // onmouseover: function (d, i) { console.log(\"onmouseover\", d, i); },\n      // onmouseout: function (d, i) { console.log(\"onmouseout\", d, i); },\n      colors: {\n        財富自由達成率: \"#03CBE6\",\n        距離財富自由目標還有: \"transparent\"\n      }\n    },\n    donut: {\n      title: \"距離財富自由還有\",\n      label: {\n        show: false\n      },\n      width: 20\n    },\n    legend: {\n      hide: \"距離財富自由目標還有\"\n    }\n  });\n\n  if (!Math.round(FIDays * 365) || !isFinite(FIDays)) {\n    d3.select(\".c3-chart-arcs-title\")\n      .style(\"dominant-baseline\", \"text-after-edge\")\n      .style(\"font-size\", \"20px\")\n      .insert(\"tspan\")\n      .attr(\"dy\", 50)\n      .attr(\"x\", 0)\n      .attr(\"font-size\", 40)\n      .text(\"？？？天\");\n  } else {\n    d3.select(\".c3-chart-arcs-title\")\n      .style(\"dominant-baseline\", \"text-after-edge\")\n      .style(\"font-size\", \"20px\")\n      .insert(\"tspan\")\n      .attr(\"dy\", 50)\n      .attr(\"x\", 0)\n      .attr(\"font-size\", 40)\n      .text(`${Math.round(FIDays * 365)}天`);\n  }\n\n}\n\n//不同使用者渲染不同頁面資料\n\nconst renderUserpageUserData = (userImg, userName, userMail) => {\n  userpageName.textContent = userName;\n  userpageMail.textContent = userMail;\n  if (userImg) {\n    userpageImg.style.background = `url(\"${userImg}\") no-repeat center/cover`;\n  } else {\n    userpageImg.style.background = `url(\"https://images.unsplash.com/photo-1667925235667-627cf2759b2c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2071&q=80\") no-repeat center/cover`;\n  }\n}\n\nconst userLogout = () => {\n  localStorage.removeItem(\"userId\");\n  localStorage.removeItem(\"accessToken\");\n  alert(\"登出成功\");\n  location.href = \"/index.html\";\n}\n\n\n//--------登入註冊功能 end--------\n\n//--------抓取後台資料 start--------\n\nconst renderBackstageUser = (userImg) => {\n  console.log(userImg);\n  if (userImg) {\n    backstageUserImg.style.background = `url(\"${userImg}\") no-repeat center/cover`;\n  } else {\n    backstageUserImg.style.background = `url(\"https://images.unsplash.com/photo-1667925235667-627cf2759b2c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2071&q=80\") no-repeat center/cover`;\n  }\n}\n\nconst getAllUserData = (data, callbackFn) => {\n  const userId = localStorage.getItem(\"userId\");\n  const userheaders = {\n    Authorization: `Barer ${localStorage.getItem(\"accessToken\")}`\n  }\n  axios\n    .get(`http://localhost:3000/users`, userheaders)\n    .then((res) => {\n      if (res.status === 200) {\n        // console.log(res);\n        callbackFn(res);\n      }\n    })\n    .catch((err) => {\n      console.log(err);\n      callbackFn();\n    })\n}\n\nconst getAllPostData = (data, callbackFn) => {\n  const userId = localStorage.getItem(\"userId\");\n  const userheaders = {\n    Authorization: `Barer ${localStorage.getItem(\"accessToken\")}`\n  }\n  axios\n    .get(\"http://localhost:3000/posts?_expand=user\", userheaders)\n    .then((res) => {\n      if (res.status === 200) {\n        // console.log(res);\n        callbackFn(res);\n      }\n    })\n    .catch((err) => {\n      console.log(err);\n      callbackFn();\n    })\n}\n\n\n//--------抓取後台資料 end--------\n\n\n//--------函士宣告 end--------\n\n\n\n\n\n//--------DOM元素監聽 start--------\n\n\n\n//首頁計算機功能\nif (clacBtn) {\n  clacBtn.addEventListener(\"click\", (e) => {\n    const formDataRow = getFormData(formList);\n    //getClacDataObj()整理Data這裡要處理，如果欄位未寫入，自動帶入0\n    const formData = getClacDataObj(formDataRow);\n    console.log(formData);\n    //userInputCheck()提領率跟投報率要有預設，並且不得小於1\n    const check = userInputCheck(formData, clacConstraints);\n    //整合現有值，進行財富自由數字及天數的運算\n    const financialIndependenceNumber = Math.round(clacFINum(formData) * 100) / 100;\n    const financialIndependenceDays = untilFI(formData, financialIndependenceNumber);\n    console.log(financialIndependenceDays);\n    //運算完畢後回傳並渲染cs.js\n    renderClacChart(financialIndependenceNumber, formData.currentInvestment, financialIndependenceDays);\n    fINum.textContent = `${financialIndependenceNumber}萬`;\n  })\n}\n\n//註冊功能\nif (register) {\n  register.addEventListener(\"click\", (e) => {\n    const data = getFormData(registerForm);\n    delete data.passwordCheck;\n    console.log(data);\n    const check = userInputCheck(registerForm, registerConstraints);\n    console.log(check);\n    if (check) {\n      data[\"isAdmin\"] = false;\n      userRegister(data);\n      // console.log(data);\n    } else {\n      console.log(\"reject\");\n    }\n\n  })\n}\n\n//登入功能\nif (login) {\n  login.addEventListener(\"click\", (e) => {\n    const data = getFormData(loginForm);\n    // console.log(data);\n    const check = userInputCheck(loginForm, loginConstraints);\n    console.log(check);\n    if (check) {\n      userLogin(data);\n    } else {\n      console.log(\"reject\");\n    }\n  })\n}\n\n\n{/* <div class=\"modal-header\">\n  <h1 class=\"modal-title fs-5\" id=\"exampleModalLabel\">Modal title</h1>\n  <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n</div>\n<div class=\"modal-body\">\n   ...\n</div>\n<div class=\"modal-footer\">\n  <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n  <button type=\"button\" class=\"btn btn-primary\">Save changes</button>\n</div> */}\n\n\n//--------DOM元素監聽 end--------\n\n//畫面載入時，判斷是否是登入狀態\nwindow.onload = () => {\n  loginCheck(\"\", (res) => {\n    // console.log(res);\n    if (res) {\n      if (res?.status === 401) {\n        console.log(res?.status);\n        renderUserNav(401, false);\n      } else if (res?.status === 200 && res?.data?.isAdmin) {\n        if (location.pathname === \"/backstage-users.html\" || location.pathname === \"/backstage-posts.html\") {\n          renderBackstageUser(res.data.userImg);\n        } else {\n          renderNavUserImg(200, res.data.userImg);\n        }\n        renderUserNav(200, true, res.data.name);\n        const logoutBtn = document.querySelector(\"[data-user-logout]\");\n        if (logoutBtn) {\n          logoutBtn.addEventListener(\"click\", (e) => {\n            userLogout();\n          })\n        }\n\n      } else if (res?.status === 200) {\n        renderUserNav(200, false, res.data.name);\n        renderNavUserImg(200, res.data.userImg);\n        const logoutBtn = document.querySelector(\"[data-user-logout]\");\n        if (logoutBtn) {\n          logoutBtn.addEventListener(\"click\", (e) => {\n            userLogout();\n          })\n        }\n      }\n    } else {\n      console.log(\"訪客模式\");\n      if (navUserImg) {\n        renderNavUserImg(\"\", false);\n      }\n\n    }\n\n  })\n}\n\n\n\n\n//當在會員頁面，進行判斷是否有登入，如果有登入撈資料給他瀏覽，如果沒登入請他登入\nif (location.pathname === \"/userpage.html\") {\n  loginCheck(\"\", (res) => {\n    if (res) {\n      if (res.status === 401) {\n        setTimeout(() => {\n          location.href = \"./login.html\"\n        }, 500);\n        alert(\"請重新登入\");\n      }\n    } else {\n      setTimeout(() => {\n        location.href = \"./login.html\"\n      }, 500);\n      alert(\"請重新登入\");\n    }\n    renderUserClacChart(30, 20, \"?\");\n    renderUserpageUserData(res.data.userImg, res.data.name, res.data.email);\n    getUserpageFIData();\n  })\n}\nconsole.log(location.pathname);\n\n\nif (location.pathname === \"/backstage-users.html\") {\n  loginCheck(\"\", (res) => {\n    // console.log(res);\n    if (res) {\n      if (res.status === 401) {\n        location.href = \"./login.html\"\n        alert(\"請重新登入\");\n      }\n    } else {\n      location.href = \"./login.html\"\n      alert(\"請重新登入\");\n    }\n\n    // console.log(res);\n  })\n  getAllUserData(\"\", (res) => {\n    const userData = res.data.reduce((acc, crr) => {\n      acc += `\n      <tr class=\"align-baseline\">\n        <th scope=\"row\">${crr.id}</th>\n        <td>${crr.name}</td>\n        <td>${crr.email}</td>\n        <td>${crr.isAdmin}</td>\n        <td>\n          <button type=\"button\" class=\"btn btn-outline-secondary\"  data-bs-toggle=\"modal\" data-bs-target=\"#showAndEdit${crr.id}\" data-backstage-showBtn>查看/編輯</button>\n        </td>\n      </tr>\n      <div class=\"modal fade\" id=\"showAndEdit${crr.id}\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n        <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h1 class=\"modal-title fs-5\" id=\"exampleModalLabel\">user data</h1>\n              <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n          </div>\n          <div class=\"modal-body\">\n            <form action=\"\" class=\"w-100\" data-backstage-edit-list>\n              <div class=\"calc-area-form-group mb-2\">\n                <label class=\"me-2\" for=\"userId${crr.id}\">id：</label>\n                <input type=\"text\" class=\"w-80\" id=\"userId${crr.id}\" name=\"id\" value=\"${crr.id}\" disabled>\n              </div>\n              <div class=\"calc-area-form-group mb-2\">\n                <label class=\"me-2\" for=\"userName${crr.id}\">name：</label>\n                <input type=\"text\" class=\"w-80\" id=\"userName${crr.id}\" name=\"name\" value=\"${crr.name}\">\n              </div>\n              <div class=\"calc-area-form-group mb-2\">\n                <label class=\"me-2\" for=\"userEmail${crr.id}\">email：</label>\n                <input type=\"text\" class=\"w-80\" id=\"userEmail${crr.id}\" name=\"email\" value=\"${crr.email}\" disabled>\n              </div>\n              <div class=\"calc-area-form-group mb-2\">\n                <label class=\"me-2\" for=\"userImg${crr.id}\">userImg：</label>\n                <input type=\"text\" class=\"w-80\" id=\"userImg${crr.id}\" name=\"userImg\" value=\"${crr.userImg}\">\n              </div>\n              <div class=\"calc-area-form-group mb-2\">\n                <label class=\"me-2\" for=\"isAdmin${crr.id}\">isAdmin：</label>\n                <input type=\"text\" class=\"w-80\" id=\"isAdmin${crr.id}\" name=\"isAdmin\" value=\"${crr.isAdmin}\">\n              </div>\n            </form>\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n            <button type=\"button\" class=\"btn btn-primary\">Save changes</button>\n          </div>\n        </div>\n      </div>\n      `\n      return acc;\n    }, \"\")\n    allUserData.innerHTML = userData;\n  });\n\n}\n\nif (location.pathname === \"/backstage-posts.html\") {\n  loginCheck(\"\", (res) => {\n    if (res) {\n      if (res.status === 401) {\n        setTimeout(() => {\n          location.href = \"./login.html\"\n        }, 500);\n        alert(\"請重新登入\");\n      }\n    } else {\n      setTimeout(() => {\n        location.href = \"./login.html\"\n      }, 500);\n      alert(\"請重新登入\");\n    }\n\n  })\n  getAllPostData(\"\", (res) => {\n    console.log(res);\n    const postData = res.data.reduce((acc, crr) => {\n      acc += `\n      <tr class=\"align-baseline\">\n        <th scope=\"row\">${crr.id}</th>\n        <td>${crr.user.name}</td>\n        <td>${crr.title}</td>\n        <td>\n          <button type=\"button\" class=\"btn btn-outline-secondary\"  data-bs-toggle=\"modal\" data-bs-target=\"#showAndEdit${crr.id}\" data-backstage-showBtn>查看/編輯</button>\n          <button type=\"button\" class=\"btn btn-outline-danger\"  data-bs-toggle=\"modal\" data-bs-target=\"#delete${crr.id}\" data-backstage-deleteBtn>刪除</button>\n        </td>\n      </tr>\n      <div class=\"modal fade\" id=\"delete${crr.id}\" tabindex=\"-1\" aria-labelledby=\"thisPostDelete\" aria-hidden=\"true\">\n        <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h1 class=\"modal-title fs-5\" id=\"thisPostDelete\">delete post</h1>\n              <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n            </div>\n            <div class=\"modal-body\">\n              是否確認要刪除此篇貼文？\n            </div>\n            <div class=\"modal-footer\">\n              <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n              <button type=\"button\" class=\"btn btn-danger\">刪除貼文</button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"modal fade\" id=\"showAndEdit${crr.id}\" tabindex=\"-1\" aria-labelledby=\"thisPostData\" aria-hidden=\"true\">\n        <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h1 class=\"modal-title fs-5\" id=\"thisPostData\">post data</h1>\n              <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n          </div>\n          <div class=\"modal-body\">\n            <form action=\"\" class=\"w-100\" data-backstage-edit-list>\n              <div class=\"calc-area-form-group mb-2\">\n                <label class=\"me-2\" for=\"postId${crr.id}\">id：</label>\n                <input type=\"text\" class=\"w-80\" id=\"postId${crr.id}\" name=\"id\" value=\"${crr.id}\" disabled>\n              </div>\n              <div class=\"calc-area-form-group mb-2\">\n                <label class=\"me-2\" for=\"userId${crr.id}\">userId：</label>\n                <input type=\"text\" class=\"w-80\" id=\"userId${crr.id}\" name=\"userId\" value=\"${crr.userId}\" disabled>\n              </div>\n              <div class=\"calc-area-form-group mb-2\">\n                <label class=\"me-2\" for=\"userName${crr.id}\">userName：</label>\n                <input type=\"text\" class=\"w-80\" id=\"userName${crr.id}\" name=\"userName\" value=\"${crr.user.name}\" disabled>\n              </div>\n              <div class=\"calc-area-form-group mb-2\">\n                <label class=\"me-2\" for=\"title${crr.id}\">title：</label>\n                <input type=\"text\" class=\"w-80\" id=\"title${crr.id}\" name=\"email\" value=\"${crr.title}\">\n              </div>\n              <div class=\"calc-area-form-group mb-2\">\n                <label class=\"me-2\" for=\"content${crr.id}\">content：</label>\n                <textarea type=\"form-control\" rows=\"6\" class=\"w-100 d-block\" id=\"content${crr.id}\" name=\"userImg\">${crr.content}</textarea>\n              </div>\n            </form>\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">關閉</button>\n            <button type=\"button\" class=\"btn btn-primary\">儲存</button>\n          </div>\n        </div>\n      </div>\n      \n\n      `\n      return acc;\n    }, \"\")\n\n    allPostData.innerHTML = postData;\n  })\n}\n\n\n//先渲染畫面\nrenderClacChart(30, 20, \"?\");\n\n\n\n\n\n\n\n\n\n\n"]}